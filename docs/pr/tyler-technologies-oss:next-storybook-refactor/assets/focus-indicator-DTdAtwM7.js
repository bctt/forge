import{C as v,e as m,B as w,f as b,i as h}from"./constants-DHKkwbIH.js";import{B as E,F as d}from"./index-CpfG0TJS.js";function B(r,{capture:t=!0,pointerenter:e=!0,focusin:i=!0}={}){let o;const c=()=>{typeof o=="function"&&o()};return{userInteraction:new Promise(g=>{const f={once:!0,capture:t},_=p=>{i&&r.removeEventListener("focusin",l,f),g(p)},l=p=>{e&&r.removeEventListener("pointerenter",_,f),g(p)};o=()=>{e&&r.removeEventListener("pointerenter",_,f),i&&r.removeEventListener("focusin",l,f)},e&&r.addEventListener("pointerenter",_,f),i&&r.addEventListener("focusin",l,f)}),destroy:c}}function D(r,t){if(!(r&&t))return!1;const e=r.getBoundingClientRect(),i=t.getBoundingClientRect();return!(e.top>i.bottom||e.right<i.left||e.bottom<i.top||e.left>i.right)}function N({x:r,y:t},e){if(!e)return!1;const{top:i,left:o,bottom:c,right:u}=e.getBoundingClientRect();return r>=o&&r<=u&&t>=i&&t<=c}function L(r,t){let e=null;return t&&(e=C(r,t)),e||r.parentElement}function C(r,t){const e=r.getRootNode();return t===":host"&&e instanceof ShadowRoot?e.host:e.querySelector(`#${t}`)}function P(r,t=","){return r.split(t).map(e=>e.trim())}function H(r){const t=window.devicePixelRatio||1;return Math.round(r*t)/t}class y extends E{constructor(t){super(t),this._targetElement=null}destroy(){this._targetElement=null}hasTargetElement(){return!!this._targetElement}addTargetListener(t,e){var i;(i=this._targetElement)==null||i.addEventListener(t,e)}removeTargetListener(t,e){var i;(i=this._targetElement)==null||i.removeEventListener(t,e)}getTargetElement(){return this._targetElement}setTargetElement(t){this._targetElement=t}trySetTarget(t){this._targetElement=L(this._component,t)}isActive(t,e){const i=e??this._targetElement;return!!(i!=null&&i.matches(t))}}const T=`${v}focus-indicator`,A={TARGET:"target",ACTIVE:"active",INWARD:"inward",CIRCULAR:"circular",ALLOW_FOCUS:"allow-focus",FOCUS_MODE:"focus-mode"},F={...A},O={FOCUS_MODE:"focusin"},a={elementName:T,attributes:F,defaults:O};class M{constructor(t){this._adapter=t,this._target=null,this._active=!1,this._inward=!1,this._circular=!1,this._allowFocus=!1,this._focusMode=a.defaults.FOCUS_MODE,this._interactionListener=e=>this._onInteraction(e)}initialize(){this._adapter.hasTargetElement()||this._adapter.trySetTarget(this._target),this._addListeners()}destroy(){this._removeListeners(),this._adapter.destroy()}_addListeners(){this._adapter.addTargetListener(this._focusMode,this._interactionListener),this._adapter.addTargetListener("focusout",this._interactionListener),this._adapter.addTargetListener("pointerdown",this._interactionListener)}_removeListeners(){this._adapter.removeTargetListener(this._focusMode,this._interactionListener),this._adapter.removeTargetListener("focusout",this._interactionListener),this._adapter.removeTargetListener("pointerdown",this._interactionListener)}_onInteraction(t){const e=t.target;switch(t.type){case this._focusMode:this.active=this._adapter.isActive(this._allowFocus?":focus":":focus-visible",e);break;case"focusout":this.active=!1;break;case"pointerdown":this.active=this._allowFocus?this._adapter.isActive(":focus",e):this._adapter.isActive(":focus-visible",e);break}}get targetElement(){return this._adapter.getTargetElement()}set targetElement(t){this._removeListeners(),this._adapter.setTargetElement(t),this._addListeners()}get target(){return this._adapter.getHostAttribute(a.attributes.TARGET)}set target(t){this._target!==t&&(this._target=t,this._adapter.isConnected&&this._adapter.trySetTarget(t),this._adapter.toggleHostAttribute(a.attributes.TARGET,!!this._target,this._target))}get active(){return this._active}set active(t){t=!!t,this._active!==t&&(this._active=t,this._adapter.toggleHostAttribute(a.attributes.ACTIVE,this._active))}get inward(){return this._inward}set inward(t){t=!!t,this._inward!==t&&(this._inward=t,this._adapter.toggleHostAttribute(a.attributes.INWARD,this._inward))}get circular(){return this._circular}set circular(t){t=!!t,this._circular!==t&&(this._circular=t,this._adapter.toggleHostAttribute(a.attributes.CIRCULAR,this._circular))}get allowFocus(){return this._allowFocus}set allowFocus(t){t=!!t,this._allowFocus!==t&&(this._allowFocus=t,this._adapter.toggleHostAttribute(a.attributes.ALLOW_FOCUS,this._allowFocus))}get focusMode(){return this._focusMode}set focusMode(t){if(t??(t=a.defaults.FOCUS_MODE),this._focusMode!==t){this._adapter.isConnected&&this._removeListeners(),this._focusMode=t,this._adapter.isConnected&&this._addListeners();const e=this._focusMode!==a.defaults.FOCUS_MODE;this._adapter.toggleHostAttribute(a.attributes.FOCUS_MODE,e,this._focusMode)}}}const R=`<template></template>
`,I=":host{--_focus-indicator-display: var(--forge-focus-indicator-display, flex);--_focus-indicator-width: var(--forge-focus-indicator-width, var(--forge-border-medium, 2px));--_focus-indicator-active-width: var(--forge-focus-indicator-active-width, 6px);--_focus-indicator-color: var(--forge-focus-indicator-color, var(--forge-theme-primary, #3f51b5));--_focus-indicator-shape: var(--forge-focus-indicator-shape, var(--forge-shape-extra-small, 1px));--_focus-indicator-duration: var(--forge-focus-indicator-duration, var(--forge-animation-duration-long4, .6s));--_focus-indicator-easing: var(--forge-focus-indicator-easing, var(--forge-animation-easing-emphasized, cubic-bezier(.2, 0, 0, 1)));--_focus-indicator-shape-start-start: var(--forge-focus-indicator-shape-start-start, var(--_focus-indicator-shape));--_focus-indicator-shape-start-end: var(--forge-focus-indicator-shape-start-end, var(--_focus-indicator-shape));--_focus-indicator-shape-end-end: var(--forge-focus-indicator-shape-end-end, var(--_focus-indicator-shape));--_focus-indicator-shape-end-start: var(--forge-focus-indicator-shape-end-start, var(--_focus-indicator-shape));--_focus-indicator-outward-offset: var(--forge-focus-indicator-outward-offset, var(--forge-spacing-xxsmall, 4px));--_focus-indicator-inward-offset: var(--forge-focus-indicator-inward-offset, 0px);--_focus-indicator-offset-block: var(--forge-focus-indicator-offset-block, 0);--_focus-indicator-offset-inline: var(--forge-focus-indicator-offset-inline, 0)}:host{animation-delay:0s,calc(var(--_focus-indicator-duration) * .25);animation-duration:calc(var(--_focus-indicator-duration) * .25),calc(var(--_focus-indicator-duration) * .75);animation-timing-function:var(--_focus-indicator-easing);box-sizing:border-box;color:var(--_focus-indicator-color);display:none;pointer-events:none;position:absolute;margin-block:var(--_focus-indicator-offset-block);margin-inline:var(--_focus-indicator-offset-inline)}:host([hidden]){display:none}:host([active]){display:var(--_focus-indicator-display)}:host(:not([inward])){animation-name:outward-grow,outward-shrink;border-end-end-radius:calc(var(--_focus-indicator-shape-end-end) + var(--_focus-indicator-outward-offset));border-end-start-radius:calc(var(--_focus-indicator-shape-end-start) + var(--_focus-indicator-outward-offset));border-start-end-radius:calc(var(--_focus-indicator-shape-start-end) + var(--_focus-indicator-outward-offset));border-start-start-radius:calc(var(--_focus-indicator-shape-start-start) + var(--_focus-indicator-outward-offset));inset:calc(-1 * var(--_focus-indicator-outward-offset));outline:var(--_focus-indicator-width) solid currentColor}:host([inward]){animation-name:inward-grow,inward-shrink;border-end-end-radius:calc(var(--_focus-indicator-shape-end-end) - var(--_focus-indicator-inward-offset));border-end-start-radius:calc(var(--_focus-indicator-shape-end-start) - var(--_focus-indicator-inward-offset));border-start-end-radius:calc(var(--_focus-indicator-shape-start-end) - var(--_focus-indicator-inward-offset));border-start-start-radius:calc(var(--_focus-indicator-shape-start-start) - var(--_focus-indicator-inward-offset));border:var(--_focus-indicator-width) solid currentColor;inset:var(--_focus-indicator-inward-offset)}:host([circular]){--_focus-indicator-shape: var(--forge-focus-indicator-shape, 50%)}@keyframes outward-grow{0%{outline-width:0}to{outline-width:var(--_focus-indicator-active-width)}}@keyframes outward-shrink{0%{outline-width:var(--_focus-indicator-active-width)}}@keyframes inward-grow{0%{border-width:0}to{border-width:var(--_focus-indicator-active-width)}}@keyframes inward-shrink{0%{border-width:var(--_focus-indicator-active-width)}}@media (prefers-reduced-motion){:host{animation:none}}";var S=Object.defineProperty,k=Object.getOwnPropertyDescriptor,n=(r,t,e,i)=>{for(var o=i>1?void 0:i?k(t,e):t,c=r.length-1,u;c>=0;c--)(u=r[c])&&(o=(i?u(t,e,o):u(o))||o);return i&&o&&S(t,e,o),o};let s=class extends w{static get observedAttributes(){return Object.values(a.attributes)}constructor(){super(),b(this,R,I),this._foundation=new M(new y(this))}connectedCallback(){this._foundation.initialize()}disconnectedCallback(){this._foundation.destroy()}attributeChangedCallback(r,t,e){switch(r){case a.attributes.TARGET:this.target=e;break;case a.attributes.ACTIVE:this.active=h(e);break;case a.attributes.INWARD:this.inward=h(e);break;case a.attributes.CIRCULAR:this.circular=h(e);break;case a.attributes.ALLOW_FOCUS:this.allowFocus=h(e);break;case a.attributes.FOCUS_MODE:this.focusMode=e;break}}};n([d()],s.prototype,"targetElement",2);n([d()],s.prototype,"target",2);n([d()],s.prototype,"active",2);n([d()],s.prototype,"inward",2);n([d()],s.prototype,"circular",2);n([d()],s.prototype,"allowFocus",2);n([d()],s.prototype,"focusMode",2);s=n([m({name:a.elementName})],s);export{s as F,B as a,L as b,P as c,a as d,D as e,N as i,C as l,H as r};
