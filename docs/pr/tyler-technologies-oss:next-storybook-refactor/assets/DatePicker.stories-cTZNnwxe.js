import{C as E,P as f,p as v,Q as b,R as g,v as C,w as D,c as I,g as V}from"./constants-DsWthFd3.js";import{l as A}from"./index-Co64lOVc.js";import{i as h,C as y}from"./calendar-Be5kmNjQ.js";import"./index-Dh0vMUMR.js";import{I as P,a as k}from"./icon-Brql383G.js";import{I as w}from"./icon-button-DOlRhrDy.js";import"./focus-indicator-C7V5BzP9.js";import"./state-layer-BzdpjRD7.js";import{P as S}from"./popover-vH5Ho-It.js";import"./overlay-CZzjdGX3.js";import{B as T,C as M,D as O,a as N,b as x,c as L}from"./base-date-picker-foundation-BvxVVMgC.js";import{l as z}from"./object-utils-BVOUzLua.js";import"./text-field-DwZVtVAP.js";import"./base-field-ClshkyJS.js";import"./label-5FJlusxN.js";import"./button-D6SN4bGQ.js";import"./checkbox-vPdB02F2.js";import"./switch-CaGvgiIN.js";const r=`${E}date-picker`,F={VALUE:"value"},B={INPUT:"input,input[forge-date-picker-input]"},U={CHANGE:`${r}-change`,OPEN:`${r}-open`,CLOSE:`${r}-close`,INPUT:`${r}-input`},n={elementName:r,selectors:B,events:U,observedAttributes:F};class H extends T{constructor(t){super(t),this._dropdownIdentifier=`forge-date-picker-${this._identifier}`}_initializeInput(){this._inputElement=this._component.querySelector(n.selectors.INPUT)}_initializeCalendarDropdown(){const t=this._getDefaultTargetElement();this._calendarDropdown=new M(t,this._dropdownIdentifier)}initializeMask(t){var e;(e=this._inputMask)==null||e.destroy(),this._inputMask=new O(this._inputElement,t)}destroyMask(){var t;(t=this._inputMask)==null||t.destroy(),this._inputMask=void 0}initializeAccessibility(){this._inputElement.setAttribute("autocomplete","off"),this._inputElement.setAttribute("autocorrect","off"),this._inputElement.setAttribute("autocapitalize","off"),this._inputElement.setAttribute("spellcheck","false"),this._inputElement.setAttribute("role","combobox"),this._inputElement.setAttribute("aria-live","assertive"),this._inputElement.setAttribute("aria-atomic","true"),this._inputElement.setAttribute("aria-haspopup","true"),this._inputElement.setAttribute("aria-expanded","false"),this._inputElement.setAttribute("aria-owns",this._dropdownIdentifier)}addInputListener(t,e,i){var a;(a=this._inputElement)==null||a.addEventListener(t,e,{capture:i})}removeInputListener(t,e,i){var a;(a=this._inputElement)==null||a.removeEventListener(t,e,{capture:i})}setInputValueChangedListener(t,e){this.destroyValueChangeListener();const i=z(t,this._inputElement,"value",e);this._valueChangeListeners.push(i)}hasInputElement(){return!!this._inputElement}attachCalendar(t,e){super.attachCalendar(t,e),this._inputElement.setAttribute("aria-expanded","true")}detachCalendar(){super.detachCalendar(),this._inputElement&&(this._inputElement.setAttribute("aria-expanded","false"),this._inputElement.removeAttribute("aria-activedescendant"))}setActiveDescendant(t){this._inputElement.setAttribute("aria-activedescendant",t)}setInputValue(t,e){this._inputElement.value!==t&&(this._inputElement.value=t,this._inputMask&&this._inputMask.updateMask(),e&&(this._inputElement.dispatchEvent(new Event("change")),this._inputElement.dispatchEvent(new Event("input"))))}isInputDisabled(){return this._inputElement.disabled}isInputFocused(){return f(this._component.ownerDocument)===this._inputElement}getInputValue(){return this._inputMask?this._inputMask.maskedValue:this._inputElement.value}setDisabled(t){this._inputElement.disabled=t,this._inputElement.setAttribute("aria-disabled",t.toString()),this._toggleElement&&(this._toggleElement.setAttribute("aria-disabled",t.toString()),this._toggleElement.hasOwnProperty("disabled")&&(this._toggleElement.disabled=t))}tryFocusInput(){this._inputElement.focus()}tryBlurInput(){this._inputElement.blur()}selectInputText(){this._inputElement.select()}emitInputEvent(t,e){v(this._inputElement,t,e)}}class R extends N{constructor(t){super(t),this._mode="single"}_initializeState(){this._value||(this._value=this._coerceDateValue(this._adapter.getInputValue()))}_emitChangeEvent(t,e){const i=this._getTypedValue(t);return this._adapter.emitHostEvent(n.events.CHANGE,i,!0,!e)?(this._setValue(t),!0):!1}_emitOpenEvent(){this._adapter.emitHostEvent(n.events.OPEN,void 0,!1)}_emitCloseEvent(){this._adapter.emitHostEvent(n.events.CLOSE,void 0,!1)}_onToday(){const t=new Date;t.setHours(0,0,0,0),this._onDateSelected({date:t,selected:!0,type:"date"})}_onClear(){this._onDateSelected({date:null,selected:!1,type:"date"})}_getCurrentValue(){return this._value}_setFormattedInputValue(t){const e=this._formatDate(this._value);e?this._adapter.setInputValue(e,t?!1:this._notifyInputValueChanges):this._allowInvalidDate||this._adapter.setInputValue("",t?!1:this._notifyInputValueChanges)}_setValue(t){(!t||this._isDateValueAcceptable(t))&&(this._value=t)}_onDateSelected(t){const e=t.date;if(t.type==="date"&&this._closeCalendar(!0),!this._emitChangeEvent(e))return;const i=this._formatDate(e);this._adapter.setInputValue(i,this._notifyInputValueChanges),this._formatInputValue(),b.isMobile||this._adapter.selectInputText()}_openCalendar(t){super._openCalendar(t);const e=this._getCurrentValue();e&&this._adapter.goToCalendarDate(new Date(e))}_applyMin(){this._value&&!this._isDateValueAcceptable(this._value)&&(this._emitChangeEvent(null,!0),this._setFormattedInputValue()),super._applyMin()}_applyMax(){this._value&&!this._isDateValueAcceptable(this._value)&&(this._emitChangeEvent(null,!0),this._setFormattedInputValue()),super._applyMax()}_applyDisabledDates(){this._value&&!this._isDateValueAcceptable(this._value)&&(this._emitChangeEvent(null,!0),this._setFormattedInputValue())}_applyDisabledDaysOfWeek(){this._value&&!this._isDateValueAcceptable(this._value)&&(this._emitChangeEvent(null,!0),this._setFormattedInputValue())}_handleInput(t){const e=this._getSanitizedDateString(t),i=this._coerceDateValue(e);this._masked&&this._adapter.emitInputEvent(n.events.INPUT,e),!h(i,this._value)&&this._isDateValueAcceptable(i)&&this._emitChangeEvent(i)}_onInputValueChanged(t){const e=this._getSanitizedDateString(t);if(this._masked&&e)return;const i=this._coerceDateValue(e);!h(i,this._value)&&this._isDateValueAcceptable(i)&&(this.value=i,this._emitChangeEvent(this._value))}_applyValue(){this._setFormattedInputValue(),this._open&&this._adapter.setCalendarValue(this._value)}get value(){const t=this._getTypedValue(this._value);return t?g(t)?new Date(t.getTime()):t:null}set value(t){this._value!==t&&(this._setValue(this._coerceDateValue(t)),this._isInitialized&&this._applyValue())}}const $=`<template>
  <slot></slot>
</template>`,j=":host{display:block}:host([hidden]){display:none}";var G=Object.defineProperty,K=Object.getOwnPropertyDescriptor,q=(s,t,e,i)=>{for(var a=i>1?void 0:i?K(t,e):t,u=s.length-1,o;u>=0;u--)(o=s[u])&&(a=(i?o(t,e,a):o(a))||a);return i&&a&&G(t,e,a),a};let _=class extends x{static get observedAttributes(){return[...Object.values(L.observedAttributes),n.observedAttributes.VALUE]}constructor(){super(),P.define(A),D(this,$,j),this._foundation=new R(new H(this))}attributeChangedCallback(s,t,e){switch(s){case n.observedAttributes.VALUE:this.value=e;return}super.attributeChangedCallback(s,t,e)}};_=q([C({name:n.elementName,dependencies:[S,y,w,k]})],_);const p="forge-date-picker",Q={title:"Components/Date Picker",render:s=>I(p,s),component:p,parameters:{actions:{disable:!0}},argTypes:{...V({tagName:p})},args:{}},l={};var d,c,m;l.parameters={...l.parameters,docs:{...(d=l.parameters)==null?void 0:d.docs,source:{originalSource:"{}",...(m=(c=l.parameters)==null?void 0:c.docs)==null?void 0:m.source}}};const W=["Demo"],ct=Object.freeze(Object.defineProperty({__proto__:null,Demo:l,__namedExportsOrder:W,default:Q},Symbol.toStringTag,{value:"Module"}));export{ct as D,l as a};
