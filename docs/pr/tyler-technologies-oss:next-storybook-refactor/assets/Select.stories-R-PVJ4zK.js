import{x as _,T}from"./lit-element-BOOoordI.js";import"./lit-html-BWgXkSvR.js";import{a as R}from"./chunk-MZXVCX43-CM0pFb8Z.js";import{C as B,E as I,v as w,w as M,h as G,d as q,g as X,G as H,s as g}from"./constants-BNmdJboH.js";import{o as k}from"./style-map-CkvVWuL1.js";import{s as z}from"./decorators-B79PnA5z.js";import{B as F,a as V,b as j,c as a,O as U,d as Y}from"./select-zlg39ffh.js";import{b as W,c as J}from"./list-BfmDVRcN.js";import{C as K}from"./circular-progress-BSDdL4vc.js";import{S as Q}from"./scaffold-DzZ6zkgi.js";import{T as Z}from"./toolbar-DlZaYpaE.js";import{I as ee}from"./icon-button-D1qECKOm.js";import"./focus-indicator-C5tGHeao.js";import"./index-Dh0vMUMR.js";import"./state-layer-UPopKgqP.js";import"./icon-CC1KhrIk.js";import{P as te}from"./popover-Cryb0HFa.js";import{F as E}from"./base-adapter-UV8LVOHh.js";import"./linear-progress-M5F_EILZ.js";import"./overlay-Dv66gCFy.js";import"./skeleton-Bg1SO82U.js";import"./base-field-BcPgRmD6.js";import"./label-WyQ6wqYc.js";import"./button-Dno1hZIV.js";import"./button-toggle-group-C9ERX37v.js";import"./checkbox-BX3t4RVJ.js";import"./switch-B1K8Df3E.js";const N=`${B}select-dropdown`,re={TARGET:"target",SELECTED_TEXT_TARGET:"selected-text-target",SYNC_SELECTED_TEXT:"sync-selected-text"},oe={...re},se={SCROLLED_BOTTOM:`${N}-scrolled-bottom`},n={elementName:N,attributes:oe,events:se};class ne extends F{constructor(e){super(e),this._syncSelectedText=!1,this._originalTargetText="",this._targetDisconnectedListener=()=>this._onTargetDisconnected()}initialize(){this._tryAttach(),super.initialize()}disconnect(){super.disconnect(),this._adapter.isAttached()&&this._detach()}_onDropdownScrollEnd(){this._adapter.emitHostEvent(n.events.SCROLLED_BOTTOM)}_applyValue(e){super._applyValue(e),this._applySelection()}_applySelection(){if(super._applySelection(),this._syncSelectedText||typeof this._selectedTextBuilder=="function"){let e=this._getSelectedText();e||(e=this._originalTargetText),this._adapter.setTargetText(e||"",this._selectedTextTarget)}}_tryAttach(){this._adapter.attach(this._target),this._adapter.isAttached()&&(this._targetDisconnectedDestructor=this._adapter.setTargetDisconnectedListener(this._targetDisconnectedListener),this._originalTargetText=this._adapter.getTargetText(this._selectedTextTarget),this.initializeTarget())}_detach(){this._adapter.detach(),this._targetDisconnectedDestructor&&(this._targetDisconnectedDestructor(),this._targetDisconnectedDestructor=void 0)}_onTargetDisconnected(){this._adapter.detach()}get target(){return this._target}set target(e){this._target!==e&&(this._target=e,this._adapter.isAttached()&&this._detach(),this._tryAttach())}get selectedTextTarget(){return this._selectedTextTarget}set selectedTextTarget(e){this._selectedTextTarget!==e&&(this._selectedTextTarget=e)}get syncSelectedText(){return this._syncSelectedText}set syncSelectedText(e){this._syncSelectedText!==e&&(this._syncSelectedText=e)}}class ae extends V{constructor(e){super(e)}initializeAccessibility(){this._targetElement.setAttribute("role","combobox"),this._targetElement.setAttribute("aria-live","polite"),this._targetElement.setAttribute("aria-haspopup","true"),this._targetElement.setAttribute("aria-expanded","false"),this.setAriaControls()}addClickListener(e){this._targetElement.addEventListener("click",e)}removeClickListener(e){this._targetElement&&this._targetElement.removeEventListener("click",e)}addTargetListener(e,r){let s,o;e==="keydown"&&(s=!1,o=!0),this._targetElement.addEventListener(e,r,{passive:s,capture:o})}removeTargetListener(e,r){this._targetElement&&this._targetElement.removeEventListener(e,r)}updateActiveDescendant(e){e?this._targetElement.setAttribute("aria-activedescendant",e):this._targetElement.removeAttribute("aria-activedescendant")}open(e){super.open(e),this._targetElement.setAttribute("aria-controls",`list-dropdown-popup-${e.id}`),this._targetElement.setAttribute("aria-expanded","true")}close(){return this._targetElement.setAttribute("aria-expanded","false"),this._targetElement.removeAttribute("aria-activedescendant"),this.setAriaControls(),super.close()}attach(e){const o=(this._component.getRootNode()||HTMLDocument||this._component.ownerDocument||document).querySelector(e);o&&(this._targetElement=o)}detach(){this._targetElement=void 0}setTargetDisconnectedListener(e){if(!this._targetElement||!this._targetElement.parentElement)return()=>{};const r=new MutationObserver(s=>{s.some(i=>Array.from(i.removedNodes).some(l=>l===this._targetElement))&&(r.disconnect(),e())});return r.observe(this._targetElement.parentElement,{childList:!0}),()=>r.disconnect()}isAttached(){return!!this._targetElement}setTargetText(e,r){let s=this._targetElement;if(r){const o=this._getElementBySelector(r);o&&(s=o)}s&&(s.textContent=e)}getTargetText(e){const r=e?this._getElementBySelector(e):this._targetElement;return r?r.innerText:""}_getElementBySelector(e){return this._targetElement.querySelector(e)||this._getRootNode().querySelector(e)}_getRootNode(){return this._component.getRootNode()??this._component.ownerDocument??document}setAriaControls(){let e=this._component.querySelector("[data-forge-aria-controls-placeholder]");if(e){this._targetElement.setAttribute("aria-controls",e.id);return}e=document.createElement("div"),e.id=`forge-select-dropdown-temp-${I(10)}`,e.setAttribute("data-forge-aria-controls-placeholder",""),this._targetElement.setAttribute("aria-controls",e.id),this._component.appendChild(e)}}const ie=`<template></template>
`,le=":host{display:none}";var ce=Object.defineProperty,pe=Object.getOwnPropertyDescriptor,h=(t,e,r,s)=>{for(var o=s>1?void 0:s?pe(e,r):e,i=t.length-1,l;i>=0;i--)(l=t[i])&&(o=(s?l(e,r,o):l(o))||o);return s&&o&&ce(e,r,o),o};let u=class extends j{static get observedAttributes(){return[n.attributes.TARGET,n.attributes.SELECTED_TEXT_TARGET,n.attributes.SYNC_SELECTED_TEXT,a.attributes.VALUE,a.attributes.MULTIPLE,a.attributes.OBSERVE_SCROLL,a.attributes.OBSERVE_SCROLL_THRESHOLD,a.attributes.POPUP_CLASSES,a.attributes.OPTION_LIMIT,a.attributes.SYNC_POPUP_WIDTH]}constructor(){super(),M(this,ie,le),this._foundation=new ne(new ae(this))}attributeChangedCallback(t,e,r){switch(t){case n.attributes.TARGET:this.target=r;return;case n.attributes.SELECTED_TEXT_TARGET:this.selectedTextTarget=r;return;case n.attributes.SYNC_SELECTED_TEXT:this.syncSelectedText=G(r);return}super.attributeChangedCallback(t,e,r)}};h([E()],u.prototype,"target",2);h([E()],u.prototype,"selectedTextTarget",2);h([E()],u.prototype,"syncSelectedText",2);u=h([w({name:n.elementName,dependencies:[U,Y,te,W,J,K,Q,Z,ee]})],u);const de="forge-select{max-width:256px}",b="forge-select",me=R("change"),ue={title:"Components/Select",component:b,render:t=>{const e=q(t),r=e?k(e):T;return _`
      <forge-select
        .label=${t.label}
        .labelPosition=${t.labelPosition}
        .labelAlignment=${t.labelAlignment}
        .variant=${t.variant}
        .theme=${t.theme}
        .shape=${t.shape}
        .density=${t.density}
        .dense=${t.dense}
        .supportTextInset=${t.supportTextInset}
        .floatLabel=${t.floatLabel}
        .placeholder=${t.placeholder}
        .multiple=${t.multiple}
        .open=${t.open}
        ?optional=${t.optional}
        ?disabled=${t.disabled}
        ?required=${t.required}
        ?invalid=${t.invalid}
        style=${r}
        @change=${me}>
        <forge-option value="1">Option 1</forge-option>
        <forge-option value="2">Option 2</forge-option>
        <forge-option value="3">Option 3</forge-option>
        ${t.supportText.length?_`<span slot="support-text">${t.supportText}</span>`:T}
        ${t.supportTextEnd.length?_`<span slot="support-text-end">${t.supportTextEnd}</span>`:T}
      </forge-text-field>
    `},decorators:[z(de)],argTypes:{...X({tagName:b,exclude:["popoverTargetElement","popoverIcon","popoverExpanded","value","selectedIndex","options","optionBuilder","selectedTextBuilder","popupElement","beforeValueChange"],controls:{labelPosition:{control:"select",options:["inline-start","inline-end","block-start","inset","none"]},labelAlignment:{control:"select",options:["default","center","baseline","start","end"]},variant:{control:"select",options:["plain","outlined","tonal","filled","raised"]},theme:{control:"select",options:[...H,"default"]},shape:{control:"select",options:["default","rounded","squared"]},density:{control:"select",options:["default","extra-small","small","medium","large","extra-large"]},supportTextInset:{control:"select",options:["start","end","both","none"]}}}),supportText:{control:{type:"text"}},supportTextEnd:{control:{type:"text"}}},args:{label:"Label",placeholder:"",multiple:!1,labelPosition:"inset",labelAlignment:"default",variant:"outlined",theme:"default",shape:"default",density:"default",dense:!1,supportText:"",supportTextEnd:"",invalid:!1,required:!1,optional:!1,disabled:!1,floatLabel:!1,supportTextInset:"none",open:!1}},c={},p={...g,args:{labelPosition:"block-start"}},d={...g,args:{labelPosition:"inline-start"}},m={...g,args:{multiple:!0}};var f,S,x;c.parameters={...c.parameters,docs:{...(f=c.parameters)==null?void 0:f.docs,source:{originalSource:"{}",...(x=(S=c.parameters)==null?void 0:S.docs)==null?void 0:x.source}}};var v,y,A;p.parameters={...p.parameters,docs:{...(v=p.parameters)==null?void 0:v.docs,source:{originalSource:`{
  ...standaloneStoryParams,
  args: {
    labelPosition: 'block-start'
  }
}`,...(A=(y=p.parameters)==null?void 0:y.docs)==null?void 0:A.source}}};var C,L,D;d.parameters={...d.parameters,docs:{...(C=d.parameters)==null?void 0:C.docs,source:{originalSource:`{
  ...standaloneStoryParams,
  args: {
    labelPosition: 'inline-start'
  }
}`,...(D=(L=d.parameters)==null?void 0:L.docs)==null?void 0:D.source}}};var O,P,$;m.parameters={...m.parameters,docs:{...(O=m.parameters)==null?void 0:O.docs,source:{originalSource:`{
  ...standaloneStoryParams,
  args: {
    multiple: true
  }
}`,...($=(P=m.parameters)==null?void 0:P.docs)==null?void 0:$.source}}};const he=["Demo","LabelAbove","LabelInline","Multiple"],ke=Object.freeze(Object.defineProperty({__proto__:null,Demo:c,LabelAbove:p,LabelInline:d,Multiple:m,__namedExportsOrder:he,default:ue},Symbol.toStringTag,{value:"Module"}));export{c as D,p as L,m as M,ke as S,d as a};
