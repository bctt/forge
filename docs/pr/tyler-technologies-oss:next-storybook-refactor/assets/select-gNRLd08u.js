import{h as W,z as K,A as X}from"./index-OZgoMCom.js";import{C as P,v as x,B as F,h as b,D as E,Y as H,r as k,E as U,Z as Q,x as O,t as S,w as Z}from"./constants-CofjQwze.js";import{B as z,F as l}from"./base-adapter-Cp8os5zW.js";import{a as J}from"./list-dropdown-Dp33tPBD.js";import"./linear-progress-CQqVRF0v.js";import{b as tt,c as et}from"./list-BwO8N7sa.js";import{a as it,P as st}from"./popover-zU5nZwla.js";import"./overlay-8qaPjs0j.js";import"./index-Dh0vMUMR.js";import"./skeleton-DFf35Xlj.js";import{I as nt,a as ot}from"./icon-CCI0Mu3G.js";import{L as rt,a as lt}from"./list-dropdown-aware-foundation-DQiAAaE_.js";import{F as h,B as c,b as at}from"./base-field-DiLLbqF5.js";import"./focus-indicator-Dj5oppX6.js";import{C as pt}from"./circular-progress-BBa8r2eB.js";import{S as dt}from"./scaffold-CrOSTjeQ.js";import{T as ht}from"./toolbar-CkwpFx_o.js";import{I as _t}from"./icon-button-DwJC4uvE.js";import"./state-layer-DBx-v2uA.js";const $=`${P}select`,ct={FIELD:"#field",SELECTED_TEXT:"#selected-text",LABEL:"#select-label"},Y={OPEN:"open",TYPE:"type",VALUE:"value",LABEL:"label",MULTIPLE:"multiple",DISABLED:"disabled",PLACEHOLDER:"placeholder",OBSERVE_SCROLL:"observe-scroll",OBSERVE_SCROLL_THRESHOLD:"observe-scroll-threshold"},ut={...Y},bt={SCROLLED_BOTTOM:`${$}-scrolled-bottom`},u={elementName:$,observedAttributes:Y,attributes:ut,selectors:ct,events:bt};class ft extends z{constructor(t){super(t)}}const j=`${P}option`,gt={DISABLED:"disabled",DIVIDER:"divider",LABEL:"label",SECONDARY_LABEL:"secondary-label",LEADING_ICON_CLASS:"leading-icon-class",LEADING_ICON_TYPE:"leading-icon-type",LEADING_ICON:"leading-icon",OPTION_CLASS:"option-class",TRAILING_ICON_CLASS:"trailing-icon-class",TRAILING_ICON_TYPE:"trailing-icon-type",TRAILING_ICON:"trailing-icon",VALUE:"value"},mt={VALUE_CHANGE:`${j}-value-change`},s={elementName:j,attributes:gt,events:mt};class Lt{constructor(t){this._adapter=t,this._disabled=!1,this._divider=!1,this._optionClass=[]}get value(){return this._value}set value(t){this._value!==t&&(this._value=t,this._adapter.emitHostEvent(s.events.VALUE_CHANGE,this._value))}get label(){return this._label}set label(t){this._label!==t&&(this._label=t,this._adapter.toggleHostAttribute(s.attributes.LABEL,!!this._label,this._label))}get secondaryLabel(){return this._secondaryLabel}set secondaryLabel(t){this._secondaryLabel!==t&&(this._secondaryLabel=t,this._adapter.toggleHostAttribute(s.attributes.SECONDARY_LABEL,!!this._secondaryLabel,this._secondaryLabel))}get disabled(){return this._disabled}set disabled(t){this._disabled!==t&&(this._disabled=t,this._adapter.toggleHostAttribute(s.attributes.DISABLED,this._disabled))}get divider(){return this._divider}set divider(t){this._divider!==t&&(this._divider=t,this._adapter.toggleHostAttribute(s.attributes.DIVIDER,this._divider))}get optionClass(){return this._optionClass}set optionClass(t){t?typeof t=="string"&&(t=t.split(" ")):t=[],t=t.filter(e=>e&&!/\s+/.test(e)),this._optionClass.toString()!==t.toString()&&(this._optionClass=t,this._adapter.toggleHostAttribute(s.attributes.OPTION_CLASS,this._optionClass&&!!this._optionClass.length,this._optionClass.join(" ")))}get leadingIcon(){return this._leadingIcon}set leadingIcon(t){this._leadingIcon!==t&&(this._leadingIcon=t,this._adapter.toggleHostAttribute(s.attributes.LEADING_ICON,!!this._leadingIcon,this._leadingIcon))}get leadingIconClass(){return this._leadingIconClass}set leadingIconClass(t){this._leadingIconClass!==t&&(this._leadingIconClass=t,this._adapter.toggleHostAttribute(s.attributes.LEADING_ICON_CLASS,!!this._leadingIconClass,this._leadingIconClass))}get leadingIconType(){return this._leadingIconType}set leadingIconType(t){this._leadingIconType!==t&&(this._leadingIconType=t,this._adapter.toggleHostAttribute(s.attributes.LEADING_ICON_TYPE,!!this._leadingIconType,this._leadingIconType))}get leadingIconComponentProps(){return this._leadingIconComponentProps}set leadingIconComponentProps(t){this._leadingIconComponentProps!==t&&(this._leadingIconComponentProps=t)}get trailingIcon(){return this._trailingIcon}set trailingIcon(t){this._trailingIcon!==t&&(this._trailingIcon=t,this._adapter.toggleHostAttribute(s.attributes.TRAILING_ICON,!!this._trailingIcon,this._trailingIcon))}get trailingIconClass(){return this._trailingIconClass}set trailingIconClass(t){this._trailingIconClass!==t&&(this._trailingIconClass=t,this._adapter.toggleHostAttribute(s.attributes.TRAILING_ICON_CLASS,!!this._trailingIconClass,this._trailingIconClass))}get trailingIconType(){return this._trailingIconType}set trailingIconType(t){this._trailingIconType!==t&&(this._trailingIconType=t,this._adapter.toggleHostAttribute(s.attributes.TRAILING_ICON_TYPE,!!this._trailingIconType,this._trailingIconType))}get trailingIconComponentProps(){return this._trailingIconComponentProps}set trailingIconComponentProps(t){this._trailingIconComponentProps!==t&&(this._trailingIconComponentProps=t)}get leadingBuilder(){return this._leadingBuilder}set leadingBuilder(t){this._leadingBuilder!==t&&(this._leadingBuilder=t)}get trailingBuilder(){return this._trailingBuilder}set trailingBuilder(t){this._trailingBuilder!==t&&(this._trailingBuilder=t)}}var At=Object.defineProperty,Et=Object.getOwnPropertyDescriptor,_=(o,t,e,i)=>{for(var n=i>1?void 0:i?Et(t,e):t,r=o.length-1,a;r>=0;r--)(a=o[r])&&(n=(i?a(t,e,n):a(n))||n);return i&&n&&At(t,e,n),n};let p=class extends F{static get observedAttributes(){return[s.attributes.VALUE,s.attributes.LABEL,s.attributes.SECONDARY_LABEL,s.attributes.DISABLED,s.attributes.DIVIDER,s.attributes.OPTION_CLASS,s.attributes.LEADING_ICON,s.attributes.LEADING_ICON_CLASS,s.attributes.LEADING_ICON_TYPE,s.attributes.TRAILING_ICON,s.attributes.TRAILING_ICON_CLASS,s.attributes.TRAILING_ICON_TYPE]}constructor(){super(),this._foundation=new Lt(new ft(this))}attributeChangedCallback(o,t,e){switch(o){case s.attributes.VALUE:this.value=e;break;case s.attributes.LABEL:this.label=e;break;case s.attributes.SECONDARY_LABEL:this.secondaryLabel=e;break;case s.attributes.DISABLED:this.disabled=b(e);break;case s.attributes.DIVIDER:this.divider=this.hasAttribute(s.attributes.DIVIDER);break;case s.attributes.OPTION_CLASS:this.optionClass=e;break;case s.attributes.LEADING_ICON:this.leadingIcon=e;break;case s.attributes.LEADING_ICON_CLASS:this.leadingIconClass=e;break;case s.attributes.LEADING_ICON_TYPE:this.leadingIconType=e;break;case s.attributes.TRAILING_ICON:this.trailingIcon=e;break;case s.attributes.TRAILING_ICON_CLASS:this.trailingIconClass=e;break;case s.attributes.TRAILING_ICON_TYPE:this.trailingIconType=e;break}}};_([l()],p.prototype,"value",2);_([l()],p.prototype,"label",2);_([l()],p.prototype,"secondaryLabel",2);_([l()],p.prototype,"disabled",2);_([l()],p.prototype,"divider",2);_([l()],p.prototype,"optionClass",2);_([l()],p.prototype,"leadingIcon",2);_([l()],p.prototype,"leadingIconClass",2);_([l()],p.prototype,"leadingIconType",2);_([l()],p.prototype,"leadingIconComponentProps",2);_([l()],p.prototype,"trailingIcon",2);_([l()],p.prototype,"trailingIconClass",2);_([l()],p.prototype,"trailingIconType",2);_([l()],p.prototype,"trailingIconComponentProps",2);_([l()],p.prototype,"leadingBuilder",2);_([l()],p.prototype,"trailingBuilder",2);p=_([x({name:s.elementName})],p);const It=`${P}option-group`,Ot={LABEL:"label"},A={elementName:It,attributes:Ot};var Ct=Object.defineProperty,yt=Object.getOwnPropertyDescriptor,Tt=(o,t,e,i)=>{for(var n=i>1?void 0:i?yt(t,e):t,r=o.length-1,a;r>=0;r--)(a=o[r])&&(n=(i?a(t,e,n):a(n))||n);return i&&n&&Ct(t,e,n),n};let v=class extends F{static get observedAttributes(){return[A.attributes.LABEL]}constructor(){super()}attributeChangedCallback(o,t,e){switch(o){case A.attributes.LABEL:this.label=e;break}}get label(){return this._label}set label(o){this._label!==o&&(this._label=o||"",this.setAttribute(A.attributes.LABEL,this._label))}get text(){return this._label}set text(o){this.label=o}};v=Tt([x({name:A.elementName})],v);var N=(o=>(o[o.Option=0]="Option",o[o.Group=1]="Group",o))(N||{});function V(o,t){const e=o.some(n=>q(n)),i=o.some(n=>Dt(n));return e&&t===1||i&&t===0}function q(o){return E(o)&&H(o)&&o.hasOwnProperty("options")}function Dt(o){return E(o)&&H(o)&&o.hasOwnProperty("label")&&o.hasOwnProperty("value")}class St extends z{constructor(t){super(t)}get popupElement(){var t;return(t=this._listDropdown)==null?void 0:t.dropdownElement}getOptions(){const t=Array.from(this._component.querySelectorAll(A.elementName));if(t.length)return t.map(e=>{const i=Array.from(e.querySelectorAll(s.elementName)),n=this._createOptionsFromElements(i);return{text:e.label,builder:e.builder,value:e.value,options:n}});{const e=Array.from(this._component.querySelectorAll(s.elementName));return this._createOptionsFromElements(e)}}_createOptionsFromElements(t){return t.map(e=>{let i=e.hasAttribute(s.attributes.OPTION_CLASS)?e.getAttribute(s.attributes.OPTION_CLASS):e.optionClass;return typeof i=="string"&&(i=i.split(" ")),{label:e.hasAttribute(s.attributes.LABEL)?e.getAttribute(s.attributes.LABEL):E(e.label)?e.label:e.innerText,secondaryLabel:e.hasAttribute(s.attributes.SECONDARY_LABEL)?e.getAttribute(s.attributes.SECONDARY_LABEL):E(e.secondaryLabel)?e.secondaryLabel:void 0,value:e.hasAttribute(s.attributes.VALUE)?e.getAttribute(s.attributes.VALUE):e.value,disabled:e.hasAttribute(s.attributes.DISABLED),divider:e.hasAttribute(s.attributes.DIVIDER),optionClass:i,leadingIcon:e.hasAttribute(s.attributes.LEADING_ICON)?e.getAttribute(s.attributes.LEADING_ICON):e.leadingIcon,leadingIconClass:e.hasAttribute(s.attributes.LEADING_ICON_CLASS)?e.getAttribute(s.attributes.LEADING_ICON_CLASS):e.leadingIconClass,leadingIconType:e.hasAttribute(s.attributes.LEADING_ICON_TYPE)?e.getAttribute(s.attributes.LEADING_ICON_TYPE):e.leadingIconType,leadingIconComponentProps:e.leadingIconComponentProps,trailingIcon:e.hasAttribute(s.attributes.TRAILING_ICON)?e.getAttribute(s.attributes.TRAILING_ICON):e.trailingIcon,trailingIconClass:e.hasAttribute(s.attributes.TRAILING_ICON_CLASS)?e.getAttribute(s.attributes.TRAILING_ICON_CLASS):e.trailingIconClass,trailingIconType:e.hasAttribute(s.attributes.TRAILING_ICON_TYPE)?e.getAttribute(s.attributes.TRAILING_ICON_TYPE):e.trailingIconType,trailingIconComponentProps:e.trailingIconComponentProps,leadingBuilder:e.leadingBuilder,trailingBuilder:e.trailingBuilder}})}open(t){var e;if(this._listDropdown=new J(this._targetElement,t),this._listDropdown.open(),this._component.id){const i=(e=this._listDropdown.dropdownElement)==null?void 0:e.querySelector("forge-list");i==null||i.setAttribute("aria-labelledby",this._component.id)}}async close(){this._listDropdown&&(await this._listDropdown.close(),this.destroyListDropdown())}destroyListDropdown(){var t;(t=this._listDropdown)==null||t.destroy(),this._listDropdown=void 0}setDismissListener(t){!this._listDropdown||!this._listDropdown.dropdownElement||this._listDropdown.dropdownElement.addEventListener(it.events.TOGGLE,t)}toggleOptionMultiple(t,e){var i;(i=this._listDropdown)==null||i.toggleOptionMultiple(t,e)}getActiveOptionIndex(){var t;return((t=this._listDropdown)==null?void 0:t.getActiveOptionIndex())??-1}activateSelectedOption(){var t;(t=this._listDropdown)==null||t.activateSelectedOption()}activateFirstOption(){var t;(t=this._listDropdown)==null||t.activateFirstOption()}highlightActiveOption(t){var e;(e=this._listDropdown)==null||e.activateOption(t)}patchSelectedValues(t){var e;(e=this._listDropdown)==null||e.setSelectedValues(t)}setOptionsListener(t){const e=n=>{n.stopPropagation(),t(this.getOptions())};this._component.addEventListener(s.events.VALUE_CHANGE,e);const i=new MutationObserver(()=>t(this.getOptions()));return i.observe(this._component,{childList:!0,subtree:!0}),()=>{this._component.removeEventListener(s.events.VALUE_CHANGE,e),i.disconnect()}}setOptions(t,e=!0){e&&this._clearOptions();for(const i of t)if(q(i)){const n=this._createOptionGroupElement(i);for(const r of i.options){const a=this._createOptionElement(r);n.appendChild(a)}this._component.appendChild(n)}else{const n=this._createOptionElement(i);this._component.appendChild(n)}}appendDropdownOptions(t){var e;(e=this._listDropdown)==null||e.appendOptions(t)}setDropdownOptions(t){var e;(e=this._listDropdown)==null||e.setOptions(t)}scrollSelectedOptionIntoView(){var t;(t=this._listDropdown)==null||t.scrollSelectedOptionIntoView()}isFocusWithinPopup(t){return!this._listDropdown||!this._listDropdown.dropdownElement?!1:this._listDropdown.dropdownElement.contains(t)}queueDropdownPositionUpdate(){this.popupElement&&window.requestAnimationFrame(()=>{const t=this.popupElement;t==null||t.position()})}_clearOptions(){Array.from(this._component.querySelectorAll(A.elementName)).forEach(i=>k(i)),Array.from(this._component.querySelectorAll(s.elementName)).forEach(i=>k(i))}_createOptionGroupElement(t){const e=document.createElement("forge-option-group");return Object.assign(e,t),e}_createOptionElement(t){const e=document.createElement("forge-option");return Object.assign(e,t),e.textContent=t.label,e}}const M={VALUE:"value",MULTIPLE:"multiple",OBSERVE_SCROLL:"observe-scroll",OBSERVE_SCROLL_THRESHOLD:"observe-scroll-threshold",POPUP_CLASSES:"popup-classes",OPTION_LIMIT:"option-limit",SYNC_POPUP_WIDTH:"sync-popup-width",CONSTRAIN_POPUP_WIDTH:"constrain-popup-width",WRAP_OPTION_TEXT:"wrap-option-text"},vt={...M},Nt={CHANGE:"change"},C={observedAttributes:M,attributes:vt,events:Nt};class Pt extends rt{constructor(t){super(),this._adapter=t,this._options=[],this._value=[],this._multiple=!1,this._open=!1,this._selectedValues=[],this._selectedLabels=[],this._selectedIndexes=[],this._filterString="",this._focusListener=e=>this._onFocus(e),this._blurListener=e=>this._onBlur(e),this._clickListener=e=>this._onClick(e),this._keydownListener=e=>this._onKeydown(e),this._optionsChangedListener=e=>this._onOptionsChanged(e),this._activeChangeListener=e=>this._onActiveOptionChanged(e),this._dropdownScrollEndListener=()=>this._onDropdownScrollEnd(),this._dismissListener=()=>this._onDismiss(),this._identifier=U()}_onFocus(t){}initialize(){this._optionListenerDestructor&&this._optionListenerDestructor(),this._optionListenerDestructor=this._adapter.setOptionsListener(this._optionsChangedListener),this._initializeValue()}initializeTarget(){this._adapter.initializeAccessibility(),this._adapter.addClickListener(this._clickListener),this._adapter.addTargetListener("blur",this._blurListener),this._adapter.addTargetListener("focus",this._focusListener),this._adapter.addTargetListener("keydown",this._keydownListener)}disconnect(){this._adapter.removeClickListener(this._clickListener),this._adapter.removeTargetListener("blur",this._blurListener),this._adapter.removeTargetListener("focus",this._focusListener),this._adapter.removeTargetListener("keydown",this._keydownListener),this._optionListenerDestructor&&this._optionListenerDestructor(),this._open=!1,this._adapter.destroyListDropdown()}appendOptions(t){this._adapter.setOptions(t,!1),this._open&&this._adapter.appendDropdownOptions(t)}selectAll(){this._multiple&&(this.value=this._flatOptions.map(t=>t.value))}deselectAll(){this._multiple&&(this.value=[])}get _flatOptions(){return V(this._options,N.Group)?[].concat.apply([],this._options.map(t=>t.options)):this._options}get _nonDividerOptions(){return this._flatOptions.filter(t=>!t.divider)}_initializeValue(){const t=this._options.length&&this._options||this._adapter.getOptions();E(this._value)&&t.length&&this._applyValue(this._value)}_onClick(t){t.button===0&&(this._open?this._closeDropdown():this._openDropdown())}_onBlur(t){this._adapter.isFocusWithinPopup(t.relatedTarget)||this._open&&this._closeDropdown()}_openDropdown(){if(this._options=this._adapter.getOptions(),!this._flatOptions.length)return;this._open=!0;const t={options:this._options,multiple:this._multiple,selectedValues:[...this._selectedValues],id:this._identifier,optionBuilder:this._optionBuilder,syncWidth:this._syncPopupWidth,constrainViewportWidth:this._constrainPopupWidth,wrapOptionText:this._wrapOptionText,observeScroll:this._observeScroll,observeScrollThreshold:this._observeScrollThreshold,scrollEndListener:this._dropdownScrollEndListener,activeChangeCallback:this._activeChangeListener,targetWidthCallback:this._targetWidthCallback,popupClasses:this._popupClasses,optionLimit:this._optionLimit,headerBuilder:this._popupHeaderBuilder,footerBuilder:this._popupFooterBuilder,closeCallback:()=>this._closeDropdown(),selectCallback:e=>{const i=this._flatOptions,n=i.find(r=>r.value===e);if(n){const r=i.indexOf(n);this._onSelect(n,r,!0)}}};this._adapter.open(t),this._adapter.setDismissListener(this._dismissListener)}_closeDropdown(){this._open=!1,this._adapter.close()}async _onSelect(t,e,i=!0){return new Promise(async n=>{if(this._valueChanging)return Promise.resolve(!1);const r=t?t.value:"",a=t?t.label:"",I=[...this._value],T=[...this._selectedValues],D=[...this._selectedLabels],B=[...this._selectedIndexes];if(this._multiple)if(this._selectedValues.includes(r)){const m=this._selectedValues.indexOf(r);this._selectedValues.splice(m,1),this._selectedLabels.splice(m,1),this._selectedIndexes.splice(m,1)}else this._selectedValues.push(r),this._selectedLabels.push(a),this._selectedIndexes.push(e);else E(r)?(this._selectedValues[0]=r,this._selectedLabels[0]=a,this._selectedIndexes[0]=e):(this._selectedValues=[],this._selectedLabels=[],this._selectedIndexes=[]);this._value=[...this._selectedValues];const d=()=>{this._selectedValues=[...T],this._selectedLabels=[...D],this._selectedIndexes=[...B],this._value=[...I]},L=()=>{if(this._multiple){const m=this._selectedIndexes.includes(e);this._adapter.toggleOptionMultiple(e,m)}this._applySelection()},R=this.multiple?[...this._selectedValues]:this._selectedValues[0];if(this._open&&i&&!this._multiple&&this._closeDropdown(),typeof this._beforeValueChange=="function"){this._valueChanging=Promise.resolve(this._beforeValueChange.call(null,R));const m=await this._valueChanging;if(this._valueChanging=void 0,!m)return d(),this._tryUpdateDropdownPosition(),n(!1)}const G=!this._adapter.emitHostEvent(C.events.CHANGE,R,!0,!0);G?d():L(),this._tryUpdateDropdownPosition(),n(!G)})}_selectActiveOption(){const t=this._adapter.getActiveOptionIndex();t>=0&&this._nonDividerOptions[t]&&this._onSelect(this._nonDividerOptions[t],t)}_tryUpdateDropdownPosition(){this._open&&this._adapter.queueDropdownPositionUpdate()}_reset(){this._selectedValues=[],this._selectedLabels=[],this._selectedIndexes=[]}_applyValue(t){this._selectedValues=[],this._selectedLabels=[],this._options=this._adapter.getOptions(),Array.isArray(t)||(t=[t]),this._value=[];for(const e of t){this._value.includes(e)||this._value.push(e);const i=this._flatOptions.find(n=>Q(n.value,e));i&&(this._selectedValues.push(i.value),this._selectedLabels.push(i.label))}this._selectedIndexes=this._selectedValues.map(e=>this._flatOptions.findIndex(i=>i.value===e)),this._adapter.patchSelectedValues(this._selectedValues)}_onDismiss(){this._closeDropdown()}_getSelectedText(){if(typeof this._selectedTextBuilder=="function"){const t=this._flatOptions.filter(e=>this._selectedValues.includes(e.value));return this._selectedTextBuilder(t)}return this._multiple?this._selectedLabels.length?this._selectedLabels.length===1?this._selectedLabels[0]:`${this._selectedLabels.length} options selected`:"":this._selectedLabels.filter(t=>t&&t.length).join(" ").trim()}_onKeydown(t){const e=t.key==="Escape"||t.keyCode===27,i=t.key==="Enter"||t.keyCode===13,n=t.key==="Space"||t.keyCode===32,r=t.key==="ArrowDown"||t.keyCode===40,a=t.key==="ArrowUp"||t.keyCode===38,I=t.keyCode>=48&&t.keyCode<=90,T=t.key==="Home"||t.keyCode===36,D=t.key==="End"||t.keyCode===35;if(t.key==="Tab"&&this._open&&!this._multiple){this._selectActiveOption();return}if(!I&&this._filterTimeout&&(window.clearTimeout(this._filterTimeout),this._filterString="",this._filterTimeout=void 0),e&&(t.preventDefault(),t.stopPropagation(),this._open)){this._closeDropdown();return}if(n)t.preventDefault(),t.stopPropagation(),this._open?this._closeDropdown():this._openDropdown();else if(i)this._open&&(t.stopPropagation(),t.preventDefault(),this._options=this._adapter.getOptions(),this._selectActiveOption());else if(a||r){if(t.preventDefault(),!this._open){this._openDropdown(),this._adapter.activateFirstOption();return}if(this._flatOptions.length===0)return;let d=0;this._open?(d=this._adapter.getActiveOptionIndex(),d===-1&&(d=this._getFirstSelectedOptionIndex())):d=this._getFirstSelectedOptionIndex(),a?d=this._getPreviousHighlightableOptionIndex(d,this._nonDividerOptions):d=this._getNextHighlightableOptionIndex(d,this._nonDividerOptions),this._adapter.highlightActiveOption(d)}else if(T)this._open&&(t.preventDefault(),this._adapter.highlightActiveOption(this._nonDividerOptions.findIndex(d=>!d.disabled)));else if(D){if(this._open){t.preventDefault();const d=this._nonDividerOptions;for(let L=d.length-1;L>=0;L--)if(!d[L].disabled){this._adapter.highlightActiveOption(L);break}}}else I&&this._filter(t.key)}_getFirstSelectedOptionIndex(){return this._nonDividerOptions.findIndex(t=>this._selectedValues.includes(t.value))}_getPreviousHighlightableOptionIndex(t,e){let i=t;return i<=0?i=e.length-1:i--,e[i].disabled?this._getPreviousHighlightableOptionIndex(i,e):i}_getNextHighlightableOptionIndex(t,e){let i=t;return i===e.length-1?i=0:i++,e[i].disabled?this._getNextHighlightableOptionIndex(i,e):i}_filter(t){this._filterTimeout&&(window.clearTimeout(this._filterTimeout),this._filterTimeout=void 0),this._filterString+=t,this._filterTimeout=window.setTimeout(()=>{this._filterString="",this._filterTimeout=void 0},300),this._options=this._adapter.getOptions();const e=this._flatOptions.find(({disabled:i,label:n})=>!i&&n.trim().toLowerCase().startsWith(this._filterString.trim().toLowerCase()));if(e){const i=this._flatOptions.indexOf(e);this._open?this._adapter.highlightActiveOption(i):this._multiple||this._onSelect(e,i,!1)}}_onOptionsChanged(t){this._options=t,this._applyValue(this._value)}_onActiveOptionChanged(t){this._adapter.updateActiveDescendant(t)}get value(){return this._multiple?[...this._value]:this._value[0]}set value(t){let e;Array.isArray(t)?e=[...t]:e=t,this._applyValue(e)}get selectedIndex(){return this._multiple?[...this._selectedIndexes]:this._selectedIndexes[0]}set selectedIndex(t){this._options=this._adapter.getOptions();let e;if(Array.isArray(t)?e=[...t]:e=[t],e.sort(),this.multiple)this.value=e.map(i=>this._flatOptions[i]).filter(i=>i).map(i=>i.value);else{const i=this._flatOptions[e[e.length-1]];if(!i)return;this.value=i.value}}get options(){return this._adapter.getOptions()}set options(t){let e;V(t,N.Group)?e=t.map(i=>({...i})):e=t.map(i=>({...i})),this._options=e,this._adapter.setOptions(e),this._initializeValue(),this._open&&this._adapter.setDropdownOptions(e)}get multiple(){return this._multiple}set multiple(t){this._multiple!==t&&(this._multiple=t,this._reset(),this._open&&this._closeDropdown())}get open(){return this._open}set open(t){this._open!==t&&(t?this._openDropdown():this._closeDropdown())}get optionBuilder(){return this._optionBuilder}set optionBuilder(t){this._optionBuilder=t}get selectedTextBuilder(){return this._selectedTextBuilder}set selectedTextBuilder(t){this._selectedTextBuilder=t}get optionLimit(){return this._optionLimit}set optionLimit(t){this._optionLimit=t}get popupClasses(){return this._popupClasses}set popupClasses(t){this._popupClasses=t}get popupHeaderBuilder(){return this._popupHeaderBuilder}set popupHeaderBuilder(t){this._popupHeaderBuilder=t}get popupFooterBuilder(){return this._popupFooterBuilder}set popupFooterBuilder(t){this._popupFooterBuilder=t}get popupElement(){return this._adapter.popupElement}get beforeValueChange(){return this._beforeValueChange}set beforeValueChange(t){this._beforeValueChange=t}}var xt=Object.defineProperty,g=(o,t,e,i)=>{for(var n=void 0,r=o.length-1,a;r>=0;r--)(a=o[r])&&(n=a(t,e,n)||n);return n&&xt(t,e,n),n};class f extends lt{constructor(){super()}attributeChangedCallback(t,e,i){switch(super.attributeChangedCallback(t,e,i),t){case C.attributes.MULTIPLE:this.multiple=b(i);break;case C.attributes.VALUE:this.value=i;break}}appendOptions(t){this._foundation.appendOptions(t)}selectAll(){this._foundation.selectAll()}deselectAll(){this._foundation.deselectAll()}connectedCallback(){this._foundation.initialize()}disconnectedCallback(){this._foundation.disconnect()}}g([l()],f.prototype,"value");g([l()],f.prototype,"selectedIndex");g([l()],f.prototype,"options");g([l()],f.prototype,"multiple");g([l()],f.prototype,"open");g([l()],f.prototype,"optionBuilder");g([l()],f.prototype,"selectedTextBuilder");g([l()],f.prototype,"beforeValueChange");g([l({set:!1})],f.prototype,"popupElement");class wt extends St{constructor(t){super(t),this._fieldElement=O(t,u.selectors.FIELD),this._labelElement=O(t,u.selectors.LABEL),this._selectedTextElement=O(t,u.selectors.SELECTED_TEXT),this._fieldElement.setAttribute("exportparts",Object.values(h.parts).join(", ")),this._fieldElement.focusIndicatorTargetElement=this._component}get fieldElement(){return this._fieldElement}initializeAccessibility(){this._component.setAttribute("role","combobox"),this._component.setAttribute("aria-haspopup","true"),this._component.setAttribute("aria-expanded","false"),this.setAriaControls(),this.fieldElement.required&&this.setHostAttribute("aria-required","true"),this.fieldElement.disabled&&this.setHostAttribute("aria-disabled","true"),this.fieldElement.invalid&&this.setHostAttribute("aria-invalid","true"),this._component.hasAttribute("tabindex")||(this._component.tabIndex=this._component.disabled?-1:0)}setLabel(t){const i=!(this._fieldElement.labelPosition==="inset"&&(this._fieldElement.density==="extra-small"||this._fieldElement.dense))&&!!(t!=null&&t.trim());(!this._component.hasAttribute("aria-label")||this._component.getAttribute("aria-label")===this._labelElement.textContent)&&this._component.setAttribute("aria-label",t),i?(this._labelElement.isConnected||this._fieldElement.insertAdjacentElement("afterbegin",this._labelElement),this._labelElement.textContent=t):this._labelElement.remove()}setPlaceholderText(t){S(this._selectedTextElement,!!(t!=null&&t.trim()),"placeholder",t)}open(t){this._targetElement||(this._targetElement=O(this._fieldElement,h.selectors.POPOVER_TARGET)),super.open(t),this._component.setAttribute("aria-controls",`list-dropdown-popup-${t.id}`),this._component.setAttribute("aria-expanded","true"),this._fieldElement.popoverExpanded=!0}close(){return this._component.setAttribute("aria-expanded","false"),this._component.removeAttribute("aria-activedescendant"),this.setAriaControls(),this._fieldElement.popoverExpanded=!1,super.close()}floatLabel(t){this._fieldElement.floatLabel=t}updateActiveDescendant(t){S(this._component,!!t,"aria-activedescendant",t)}setSelectedText(t){this._selectedTextElement.textContent=t}setDisabled(t){this._component.tabIndex=t?-1:0,S(this._component,t,"aria-disabled","true")}addClickListener(t){this._component.addEventListener("click",t)}removeClickListener(t){this._component.removeEventListener("click",t)}addTargetListener(t,e){this._component.addEventListener(t,e)}removeTargetListener(t,e){this._component.removeEventListener(t,e)}setAriaControls(){let t=this._component.querySelector("[data-forge-aria-controls-placeholder]");if(t){this._component.setAttribute("aria-controls",t.id);return}t=document.createElement("div"),t.id=`forge-select-dropdown-temp-${U(10)}`,t.setAttribute("data-forge-aria-controls-placeholder",""),this._component.setAttribute("aria-controls",t.id),this._component.appendChild(t)}}class Bt extends Pt{constructor(t){super(t),this._label="",this._permanentlyFloatLabel=!1,this._mousedownListener=this._onMouseDown.bind(this)}initialize(){this._adapter.tryApplyGlobalConfiguration(["labelPosition"]),super.initialize(),super.initializeTarget(),this._initializeLabel(),this._initializeAccessibility(),this._adapter.addTargetListener("mousedown",this._mousedownListener)}disconnect(){super.disconnect(),this._adapter.removeTargetListener("mousedown",this._mousedownListener)}syncFloatingLabelState({force:t}={}){t!==void 0&&(this._permanentlyFloatLabel=t),this._updateLabel(),this._tryFloatLabel()}setDisabled(t){this._adapter.setDisabled(t)}_initializeLabel(){this._updateLabel(),this._tryFloatLabel()}_initializeValue(){super._initializeValue(),this._tryFloatLabel()}_initializeAccessibility(){this._adapter.initializeAccessibility()}_onMouseDown(t){t.preventDefault()}_onClick(t){this._adapter.fieldElement.disabled||t.composedPath().find(i=>{var n;return(n=i.matches)==null?void 0:n.call(i,"slot[name=accessory]")})||(this._adapter.focusHost(),super._onClick(t))}_openDropdown(){super._openDropdown(),this._open&&this._adapter.toggleHostAttribute(u.attributes.OPEN,!0)}_closeDropdown(){super._closeDropdown(),this._open||this._adapter.toggleHostAttribute(u.attributes.OPEN,!1)}_onDismiss(){super._onDismiss()}_onDropdownScrollEnd(){this._adapter.emitHostEvent(u.events.SCROLLED_BOTTOM)}async _onSelect(t,e,i=!0){const n=await super._onSelect(t,e,i);return n&&(this._adapter.setSelectedText(this._getSelectedText()),i&&!this._multiple&&this._adapter.focusHost()),this._tryFloatLabel(),n}_reset(){super._reset(),this._adapter.setSelectedText(""),this._tryFloatLabel()}_tryFloatLabel(){if(this._permanentlyFloatLabel){this._adapter.floatLabel(!0);return}const t=!!this._getSelectedText()||!!this._selectedValues.length,e=!!this._placeholder;this._adapter.floatLabel(t||e)}_updateLabel(){this._adapter.setLabel(this._label)}_applyValue(t){super._applyValue(t);const e=this._getSelectedText();this._adapter.setSelectedText(e),this._open||this._tryFloatLabel()}get label(){return this._label}set label(t){this._label!==t&&(this._label=t,this._updateLabel(),this._label&&this._initializeLabel(),this._adapter.toggleHostAttribute(u.attributes.LABEL,!!this._label,this._label))}get placeholder(){return this._placeholder}set placeholder(t){this._placeholder!==t&&(this._placeholder=t,this._adapter.setPlaceholderText(this._placeholder),this._initializeLabel())}get multiple(){return super.multiple}set multiple(t){super.multiple=t,this._adapter.toggleHostAttribute(u.attributes.MULTIPLE,t)}}function Rt(o){class t extends o{constructor(...i){super(...i)}initializeFieldInstance(i){this._fieldElement=i,this._fieldElement.shadowRoot||window.customElements.upgrade(this._fieldElement)}attributeChangedCallback(i,n,r){var a;switch(i){case c.observedAttributes.LABEL_POSITION:this.labelPosition=r;return;case c.observedAttributes.LABEL_ALIGNMENT:this.labelAlignment=r;return;case c.observedAttributes.INVALID:this.invalid=b(r);return;case c.observedAttributes.REQUIRED:this.required=b(r);return;case c.observedAttributes.OPTIONAL:this.optional=b(r);return;case c.observedAttributes.DISABLED:this.disabled=b(r);return;case c.observedAttributes.FLOAT_LABEL:this.floatLabel=b(r);return;case c.observedAttributes.VARIANT:this.variant=r;return;case c.observedAttributes.THEME:this.theme=r;return;case c.observedAttributes.SHAPE:this.shape=r;return;case c.observedAttributes.DENSITY:this.density=r;return;case c.observedAttributes.DENSE:this.dense=b(r);return;case c.observedAttributes.POPOVER_ICON:this.popoverIcon=b(r);return;case c.observedAttributes.SUPPORT_TEXT_INSET:this.supportTextInset=r;return}(a=super.attributeChangedCallback)==null||a.call(this,i,n,r)}get labelPosition(){return this._fieldElement.labelPosition}set labelPosition(i){this._fieldElement.labelPosition!==i&&(this._fieldElement.labelPosition=i,this.setAttribute(h.attributes.LABEL_POSITION,i))}get labelAlignment(){return this._fieldElement.labelAlignment}set labelAlignment(i){this._fieldElement.labelAlignment!==i&&(this._fieldElement.labelAlignment=i,this.setAttribute(h.attributes.LABEL_ALIGNMENT,i))}get invalid(){return this._fieldElement.invalid}set invalid(i){this._fieldElement.invalid!==i&&(this._fieldElement.invalid=i,this.toggleAttribute(h.attributes.INVALID,i))}get required(){return this._fieldElement.required}set required(i){this._fieldElement.required!==i&&(this._fieldElement.required=i,this.toggleAttribute(h.attributes.REQUIRED,i))}get optional(){return this._fieldElement.optional}set optional(i){this._fieldElement.optional!==i&&(this._fieldElement.optional=i,this.toggleAttribute(h.attributes.OPTIONAL,i))}get disabled(){return this._fieldElement.disabled}set disabled(i){this._fieldElement.disabled!==i&&(this._fieldElement.disabled=i,this.toggleAttribute(h.attributes.DISABLED,i))}get floatLabel(){return this._fieldElement.floatLabel}set floatLabel(i){this._fieldElement.floatLabel!==i&&(this._fieldElement.floatLabel=i,this.toggleAttribute(h.attributes.FLOAT_LABEL,i))}get variant(){return this._fieldElement.variant}set variant(i){this._fieldElement.variant!==i&&(this._fieldElement.variant=i,this.setAttribute(h.attributes.VARIANT,i))}get theme(){return this._fieldElement.theme}set theme(i){this._fieldElement.theme!==i&&(this._fieldElement.theme=i,this.setAttribute(h.attributes.THEME,i))}get shape(){return this._fieldElement.shape}set shape(i){this._fieldElement.shape!==i&&(this._fieldElement.shape=i,this.setAttribute(h.attributes.SHAPE,i))}get density(){return this._fieldElement.density}set density(i){this._fieldElement.density!==i&&(this._fieldElement.density=i,this.setAttribute(h.attributes.DENSITY,i))}get dense(){return this._fieldElement.dense}set dense(i){this._fieldElement.dense!==i&&(this._fieldElement.dense=i,this.toggleAttribute(h.attributes.DENSE,i))}get popoverIcon(){return this._fieldElement.popoverIcon}set popoverIcon(i){this._fieldElement.popoverIcon!==i&&(this._fieldElement.popoverIcon=i,this.toggleAttribute(h.attributes.POPOVER_ICON,i))}get supportTextInset(){return this._fieldElement.supportTextInset}set supportTextInset(i){this._fieldElement.supportTextInset!==i&&(this._fieldElement.supportTextInset=i,this.setAttribute(h.attributes.SUPPORT_TEXT_INSET,i))}floatLabelWithoutAnimation(i){this._fieldElement.floatLabelWithoutAnimation(i)}}return t}const Gt=`<template>
  <forge-field id="field" popover-icon focus-indicator-allow-focus focus-indicator-focus-mode="focus">
    <label id="select-label" aria-hidden="true" part="label"></label>
    <slot slot="start" name="start"></slot>
    <div data-forge-field-input class="selected-text-container" part="text-container" aria-live="assertive" aria-atomic="true">
      <slot name="value">
        <span id="selected-text" class="selected-text" part="text"></span>
      </slot>
    </div>
    <slot slot="end" name="end"></slot>
    <slot slot="accessory" name="accessory"></slot>
    <slot slot="support-text" name="support-text"></slot>
    <slot slot="support-text-end" name="support-text-end"></slot>

    <!-- Include deprecated leading alias -->
    <slot slot="start" name="leading"></slot>
    <!-- Include deprecated trailing alias -->
    <slot slot="end" name="trailing"></slot>
    <!-- Include deprecated addon-end alias -->
    <slot slot="accessory" name="addon-end"></slot>
    <!-- Include deprecated helper-text alias -->
    <slot slot="support-text" name="helper-text"></slot>
  </forge-field>
</template>
`,kt=":host{display:block;outline:none}:host([hidden]){display:none}forge-field{--_select-placeholder-color: var(--forge-select-placeholder-color, var(--forge-theme-text-low, rgba(0, 0, 0, .38)));--_select-dense-font-size: var(--forge-select-dense-font-size, calc(var(--forge-typography-font-size, 1rem) * .875))}.selected-text-container{display:grid;align-items:center;cursor:pointer}::slotted([slot=value]),.selected-text{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.selected-text:empty:before{content:attr(placeholder);color:var(--_select-placeholder-color);font-size:.875rem}:host([disabled]) .selected-text-container{cursor:not-allowed}forge-field{display:contents}forge-field:is([dense],[density=extra-small]) .selected-text{font-size:var(--_select-dense-font-size)}";var Vt=Object.defineProperty,Ft=Object.getOwnPropertyDescriptor,w=(o,t,e,i)=>{for(var n=i>1?void 0:i?Ft(t,e):t,r=o.length-1,a;r>=0;r--)(a=o[r])&&(n=(i?a(t,e,n):a(n))||n);return i&&n&&Vt(t,e,n),n};let y=class extends Rt(f){static get observedAttributes(){return[...Object.values(c.observedAttributes),...Object.values(u.observedAttributes),...Object.values(C.observedAttributes)]}constructor(){var t;super(),nt.define([W,K,X]),Z(this,Gt,kt);const o=(t=this.shadowRoot)==null?void 0:t.querySelector(h.elementName);this.initializeFieldInstance(o),this._foundation=new Bt(new wt(this))}attributeChangedCallback(o,t,e){switch(o){case u.observedAttributes.OPEN:this.open=b(e);return;case u.observedAttributes.LABEL:this.label=e;return;case u.observedAttributes.PLACEHOLDER:this.placeholder=e;return}super.attributeChangedCallback(o,t,e)}get floatLabel(){return super.floatLabel}set floatLabel(o){this._foundation.syncFloatingLabelState({force:o})}get density(){return super.density}set density(o){super.density=o,this._foundation.syncFloatingLabelState()}get dense(){return super.dense}set dense(o){super.dense=o,this._foundation.syncFloatingLabelState()}get disabled(){return super.disabled}set disabled(o){super.disabled=o,this._foundation.setDisabled(o)}get labelPosition(){return super.labelPosition}set labelPosition(o){super.labelPosition=o,this._foundation.syncFloatingLabelState()}};w([l()],y.prototype,"label",2);w([l()],y.prototype,"placeholder",2);y=w([x({name:u.elementName,dependencies:[at,p,v,st,tt,et,pt,ot,dt,ht,_t]})],y);export{Pt as B,p as O,y as S,St as a,f as b,C as c,v as d};
