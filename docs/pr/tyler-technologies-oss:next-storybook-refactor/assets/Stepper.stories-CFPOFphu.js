import{x as I,T as O}from"./lit-element-BOOoordI.js";import"./lit-html-BWgXkSvR.js";import{C as N,x as f,H as L,Q as x,R as D,D as Y,X as K,v as F,B as M,w as P,a6 as H,h as g,d as k,g as G,s as w}from"./constants-R2FX_sk2.js";import{S as n,a as U}from"./step-BufvmiD-.js";import"./state-layer-CeQoaxI0.js";import{B,F as p}from"./base-adapter-qTVGb81X.js";import{g as W}from"./event-utils-C1SDeUaq.js";import{o as V}from"./style-map-CkvVWuL1.js";const $=`${N}stepper`,v={STEPPER:"forge-stepper",LINEAR:"linear",ALTERNATIVE:"alternative",CLUSTERED:"clustered",FIXED:"fixed",ALIGN_LEFT:"align-left",ALIGN_CENTER:"align-center",ALIGN_RIGHT:"align-right",VERTICAL:"vertical",FOCUSED:"focused"},X={STEPPER:`.${v.STEPPER}`},z={SELECTED_INDEX:"selected-index",LINEAR:"linear",ALTERNATIVE:"alternative",LAYOUT_MODE:"layout-mode",LAYOUT_ALIGN:"layout-align",DISABLED:"disabled",VERTICAL:"vertical"},o={ARROW_LEFT_KEY:"ArrowLeft",ARROW_RIGHT_KEY:"ArrowRight",ARROW_UP_KEY:"ArrowUp",ARROW_DOWN_KEY:"ArrowDown",END_KEY:"End",ENTER_KEY:"Enter",HOME_KEY:"Home",SPACE_KEY:"Space",TAB_KEY:"Tab"},_={ARROW_LEFT_KEYCODE:37,ARROW_RIGHT_KEYCODE:39,END_KEYCODE:35,HOME_KEYCODE:36,ENTER_KEYCODE:13,SPACE_KEYCODE:32},j=[o.ARROW_LEFT_KEY,o.ARROW_RIGHT_KEY,o.ARROW_DOWN_KEY,o.ARROW_UP_KEY,o.END_KEY,o.HOME_KEY,o.ENTER_KEY,o.SPACE_KEY,o.TAB_KEY],q={[_.ARROW_LEFT_KEYCODE]:o.ARROW_LEFT_KEY,[_.ARROW_RIGHT_KEYCODE]:o.ARROW_RIGHT_KEY,[_.END_KEYCODE]:o.END_KEY,[_.HOME_KEYCODE]:o.HOME_KEY,[_.ENTER_KEYCODE]:o.ENTER_KEY,[_.SPACE_KEYCODE]:o.SPACE_KEY},s={elementName:$,classes:v,selectors:X,attributes:z,numbers:_,strings:o,ACCEPTABLE_KEYS:j,KEYCODE_MAP:q};class h{static createStepElement(t,e,i){const a=document.createElement(n.elementName);return a.index=e,a.completed=t.completed||!1,a.editable=t.editable||!1,a.selected=i.selectedIndex===e,a.alternative=i.alternative,a.error=t.error||!1,a.disabled=t.disabled||!1,a.vertical=t.vertical??i.vertical??!1,a.ignoreUserExpansion=t.ignoreUserExpansion||!1,a.expanded=t.expanded||!1,i.linear&&e>i.selectedIndex&&(a.tabIndex=-1),a.textContent=t.label,t.optionalLabel&&a.appendChild(this.createStepOptionalLabel(t.optionalLabel)),a}static createStepOptionalLabel(t){const e=document.createElement("span");return e.slot="optional",e.textContent=t||"",e}static setLinearState(t,e){let i=t.classList.contains(s.classes.LINEAR);i&&!e&&(t.classList.remove(s.classes.LINEAR),i=!1),!i&&e&&t.classList.add(s.classes.LINEAR)}static setAlternativeState(t,e){let i=t.classList.contains(s.classes.ALTERNATIVE);i&&!e&&(t.classList.remove(s.classes.ALTERNATIVE),i=!1),!i&&e&&t.classList.add(s.classes.ALTERNATIVE)}static setLayoutMode(t,e){switch(e){case"clustered":t.classList.contains(s.classes.FIXED)&&t.classList.remove(s.classes.FIXED),t.classList.add(s.classes.CLUSTERED);break;case"fixed":t.classList.contains(s.classes.CLUSTERED)&&t.classList.remove(s.classes.CLUSTERED),t.classList.add(s.classes.FIXED);break}}static setLayoutAlign(t,e){switch(t.classList.contains(s.classes.ALIGN_LEFT)&&t.classList.remove(s.classes.ALIGN_LEFT),t.classList.contains(s.classes.ALIGN_CENTER)&&t.classList.remove(s.classes.ALIGN_CENTER),t.classList.contains(s.classes.ALIGN_RIGHT)&&t.classList.remove(s.classes.ALIGN_RIGHT),e){case"left":t.classList.add(s.classes.ALIGN_LEFT);break;case"center":t.classList.add(s.classes.ALIGN_CENTER);break;case"right":t.classList.add(s.classes.ALIGN_RIGHT);break}}static createSteps(t){const e=[];return t.steps.forEach((i,a)=>{const l=h.createStepElement(i,a,t);e.push(l)}),e[0].setAttribute(n.attributes.FIRST,""),e[e.length-1].setAttribute(n.attributes.LAST,""),e}}class Q extends B{constructor(t){super(t),this._rootElement=f(t,s.selectors.STEPPER),this._slotElement=this._rootElement.querySelector("slot")}initializeAccessibility(){this._component.hasAttribute("role")||this._component.setAttribute("role","tablist")}patchSafari(){this._applyToSteps(t=>t.setAttribute("safari",""))}addSlotChangeListener(t){this._slotElement.addEventListener("slotchange",t)}removeSlotChangeListener(t){this._slotElement.addEventListener("slotchange",t)}getLastStep(){const t=this._getSteps();return t.item(t.length-1)}setSelected(t){this._getSteps().forEach(e=>{e===t?e.selected=!0:e.selected=!1})}assignIndices(){this._getSteps().forEach((e,i)=>{e.index=i})}assignFirstLastStep(){const t=this._getSteps();t&&t.length>1&&(t[0].setAttribute("first",""),t[t.length-1].setAttribute("last",""))}setLayoutAlign(t){h.setLayoutAlign(this._rootElement,t)}setLayoutMode(t){h.setLayoutMode(this._rootElement,t),this._applyToSteps(e=>e.setAttribute(n.attributes.CLUSTERED,""))}setAlternativeState(t){h.setAlternativeState(this._rootElement,t),this._applyToSteps(e=>e.alternative=t)}setVertical(t){L(this._rootElement,t,s.classes.VERTICAL),this._applyToSteps(e=>e.vertical=t)}setLinearState(t){h.setLinearState(this._rootElement,t)}removeRootListener(t,e){this._rootElement.removeEventListener("click",e)}addRootListener(t,e){this._rootElement.addEventListener(t,e)}setSelectedByIndex(t){this._applyToSteps(e=>{e.selected&&e.index!==t&&(e.selected=!1),e.index===t&&(e.selected=!0)})}applyConfiguredSteps(t){this._component.querySelectorAll(n.elementName).forEach(e=>{this._component.removeChild(e)}),t.forEach(e=>this._component.appendChild(e))}tryGetFocusedStep(){let t;const e=x(this._component.ownerDocument);return this._applyToSteps(i=>{e===f(i,n.selectors.STEP)&&(t=i)}),t}getFocusedOrSelectedStep(){let t=this.tryGetFocusedStep();return t||(t=this._getSteps()[0],t.focus()),t}getStep(t){let e=0;const i=this._getSteps();return t<0?i.item(i.length-1):(i.length>t&&(e=t),i.item(e))}toggleDisabled(t){this._applyToSteps(e=>e.disabled=t)}toggleRootClass(t,e){L(this._rootElement,e,t)}isStepperFocused(){return this._rootElement.classList.contains(s.classes.FOCUSED)}setStepsListener(t,e){this._applyToSteps(i=>i.addEventListener(t,e))}removeStepsListener(t,e){this._applyToSteps(i=>i.removeEventListener(t,e))}_applyToSteps(t){this._getSteps().forEach(t)}_getSteps(){return this._component.querySelectorAll(n.elementName)}}class J{constructor(t){this._adapter=t,this._steps=[],this._selectedIndex=0,this._linear=!1,this._alternative=!1,this._layoutMode="fixed",this._layoutAlign="center",this._initialize=!1,this._clickListener=e=>this._handleClick(e),this._keyListener=e=>this._onKeydown(e),this._stepFocusListener=()=>this._onStepFocus(),this._stepBlurListener=()=>this._onStepBlur(),this._stepExpandedContentFocusInListener=e=>this._onStepExpandedContentFocusIn(e),this._stepExpandedContentFocusOutListener=e=>this._onStepExpandedContentFocusOut(e),this._slotChangeListener=e=>this._onSlotChange(e)}initialize(){this._adapter.initializeAccessibility(),this._adapter.assignIndices(),this._adapter.setLinearState(this._linear),this._adapter.setAlternativeState(this._alternative),this._adapter.setLayoutAlign(this._layoutAlign),this._adapter.setLayoutMode(this._layoutMode),this._adapter.addRootListener("click",this._clickListener),this._adapter.addHostListener("keydown",this._keyListener),this._adapter.assignFirstLastStep(),this._adapter.addRootListener(n.events.EXPANDED_CONTENT_FOCUSIN,this._stepExpandedContentFocusInListener),this._adapter.addRootListener(n.events.EXPANDED_CONTENT_FOCUSOUT,this._stepExpandedContentFocusOutListener),this._applySelectedIndex(),this._patchBrowser(),this._adapter.setStepsListener("blur",this._stepBlurListener),this._adapter.setStepsListener("focus",this._stepFocusListener),this._initialize||this._adapter.addSlotChangeListener(this._slotChangeListener),this._initialize=!0}disconnect(){this._adapter.removeRootListener("click",this._clickListener),this._adapter.removeHostListener("keydown",this._keyListener),this._adapter.removeSlotChangeListener(this._slotChangeListener),this._adapter.removeStepsListener("blur",this._stepBlurListener),this._adapter.removeStepsListener("focus",this._stepFocusListener)}get steps(){return this._steps.map(t=>({...t}))}set steps(t){if(Array.isArray(t)&&t.length>0)this._steps=[...t.map(e=>({...e}))];else{this._steps=[];return}this._renderConfiguration()}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){if(!Y(t))t=0;else if(!K(t)){const e=Number(t);t=isNaN(e)?0:e}this._selectedIndex!==t&&(this._selectedIndex=t,this._adapter.setHostAttribute(s.attributes.SELECTED_INDEX,this._selectedIndex.toString()),this._applySelectedIndex())}get linear(){return this._linear}set linear(t){t=!!t,this._linear!==t&&(this._linear=t,this._adapter.setLinearState(this._linear),this._adapter.setHostAttribute(s.attributes.LINEAR,this._linear.toString()))}get alternative(){return this._alternative}set alternative(t){t=!!t,this._alternative!==t&&(this._alternative=t,this._adapter.setAlternativeState(this._alternative),this._adapter.setHostAttribute(s.attributes.ALTERNATIVE,this._alternative.toString()))}get layoutMode(){return this._layoutMode}set layoutMode(t){/^(fixed|clustered)$/.test(t)&&this._layoutMode!==t&&(this._layoutMode=t,this._adapter.setHostAttribute(s.attributes.LAYOUT_MODE,this._layoutMode),this._adapter.setLayoutMode(this._layoutMode))}get layoutAlign(){return this._layoutAlign}set layoutAlign(t){/^(left|center|right)$/.test(t)&&this._layoutAlign!==t&&(this._layoutAlign=t,this._adapter.setLayoutAlign(this._layoutAlign),this._adapter.setHostAttribute(s.attributes.LAYOUT_ALIGN,this._layoutAlign))}get disabled(){return this._disabled}set disabled(t){t!==this._disabled&&(this._disabled=t,this._applyDisabled())}get vertical(){return this._vertical}set vertical(t){t!==this._vertical&&(this._vertical=t,this._applyVertical(),this._adapter.toggleHostAttribute(s.attributes.VERTICAL,this._vertical))}_applyVertical(){this._adapter.setVertical(this._vertical)}_applyDisabled(){this._disabled?this._adapter.setHostAttribute(s.attributes.DISABLED,"disabled"):this._adapter.removeHostAttribute(s.attributes.DISABLED),this._adapter.toggleDisabled(this._disabled)}_applySelectedIndex(){this._adapter.setSelectedByIndex(this._selectedIndex)}_handleClick(t){if(t.preventDefault(),this._linear)return;const e=W(t),i=e.find(l=>l.classList&&l.classList.contains(n.classes.STEP)),a=e.find(l=>l.localName===n.elementName);i&&a&&!a.selected&&!a.disabled&&this._adapter.emitHostEvent(n.events.SELECT,a.index,!0,!0)&&(this._adapter.setSelected(a),this.selectedIndex=a.index)}_renderConfiguration(){const t=h.createSteps({steps:this._steps,vertical:this._vertical,selectedIndex:this._selectedIndex,alternative:this._alternative,layoutAlign:this._layoutAlign,layoutMode:this._layoutMode,linear:this._linear});this.disconnect(),this._adapter.applyConfiguredSteps(t),this.initialize()}_onKeydown(t){if(this._linear)return;const e=this._getKeyFromEvent(t);if(!this._adapter.isStepperFocused()||!e)return;[n.strings.HOME_KEY,n.strings.END_KEY,n.strings.ARROW_DOWN_KEY,s.strings.ARROW_UP_KEY].includes(e)&&t.preventDefault();const i=this._vertical?this._determineVerticalMoveTarget(e):this._determineMoveTarget(e);i&&this._moveFocusTo(i)}_moveFocusTo(t){f(t,n.selectors.STEP).focus()}_getKeyFromEvent(t){return s.ACCEPTABLE_KEYS.includes(t.key)?t.key:s.KEYCODE_MAP[t.keyCode]}_determineMoveTarget(t){const e=this._adapter.getFocusedOrSelectedStep();if(e)switch(t){case s.strings.ARROW_RIGHT_KEY:return this._adapter.getStep(e.index+1);case s.strings.ARROW_LEFT_KEY:return this._adapter.getStep(e.index-1);case s.strings.HOME_KEY:return this._adapter.getStep(0);case s.strings.END_KEY:return this._adapter.getLastStep()}return e}_determineVerticalMoveTarget(t){const e=this._adapter.getFocusedOrSelectedStep();if(e)switch(t){case s.strings.ARROW_DOWN_KEY:return this._adapter.getStep(e.index+1);case s.strings.ARROW_UP_KEY:return this._adapter.getStep(e.index-1);case s.strings.HOME_KEY:return this._adapter.getStep(0);case s.strings.END_KEY:return this._adapter.getLastStep()}return e}_onSlotChange(t){this.disconnect(),this.initialize()}_onStepExpandedContentFocusIn(t){const e=this._adapter.getStep(t.detail.index+1);e&&e.setStepTabIndex(0),t.detail.setStepTabIndex(0)}_onStepExpandedContentFocusOut(t){const e=t.target,i=this._adapter.getStep(e.index+1);i&&i.setStepTabIndex(-1),e.setStepTabIndex(-1)}_onStepFocus(){this._adapter.toggleRootClass(s.classes.FOCUSED,!0)}_onStepBlur(){this._adapter.toggleRootClass(s.classes.FOCUSED,!1)}_patchBrowser(){new D().SAFARI()&&this._adapter.patchSafari()}}const Z=`<template>
  <div class="forge-stepper" part="root">
    <slot></slot>
  </div>
</template>`,tt=":host{display:block}:host([hidden]){display:none}:host([vertical]) .forge-stepper{display:unset;align-items:unset;white-space:unset;overflow:unset}.forge-stepper{display:flex;align-items:center;white-space:nowrap;overflow:hidden}.forge-stepper:not(.vertical) ::slotted(*){display:flex;align-items:center;position:relative;min-width:112px}.forge-stepper.fixed ::slotted(*){flex:1}.forge-stepper.alternative{align-items:flex-start}.forge-stepper.alternative ::slotted(*){min-width:160px}.forge-stepper.align-left{justify-content:flex-start}.forge-stepper.align-center{justify-content:center}.forge-stepper.align-right{justify-content:flex-end}";var et=Object.defineProperty,st=Object.getOwnPropertyDescriptor,d=(r,t,e,i)=>{for(var a=i>1?void 0:i?st(t,e):t,l=r.length-1,S;l>=0;l--)(S=r[l])&&(a=(i?S(t,e,a):S(a))||a);return i&&a&&et(t,e,a),a};let c=class extends M{static get observedAttributes(){return[s.attributes.SELECTED_INDEX,s.attributes.LINEAR,s.attributes.ALTERNATIVE,s.attributes.LAYOUT_MODE,s.attributes.LAYOUT_ALIGN,s.attributes.DISABLED,s.attributes.VERTICAL]}constructor(){super(),P(this,Z,tt),this._foundation=new J(new Q(this))}async connectedCallback(){await H(this),this._foundation.initialize()}disconnectedCallback(){this._foundation.disconnect()}attributeChangedCallback(r,t,e){switch(r){case s.attributes.SELECTED_INDEX:this.selectedIndex=Number(e)||0;break;case s.attributes.LINEAR:this.linear=g(e);break;case s.attributes.ALTERNATIVE:this.alternative=g(e);break;case s.attributes.LAYOUT_MODE:this.layoutMode=e;break;case s.attributes.LAYOUT_ALIGN:this.layoutAlign=e;break;case s.attributes.DISABLED:this.disabled=g(e);break;case s.attributes.VERTICAL:this.vertical=g(e);break}}};d([p()],c.prototype,"steps",2);d([p()],c.prototype,"selectedIndex",2);d([p()],c.prototype,"linear",2);d([p()],c.prototype,"alternative",2);d([p()],c.prototype,"layoutMode",2);d([p()],c.prototype,"layoutAlign",2);d([p()],c.prototype,"disabled",2);d([p()],c.prototype,"vertical",2);c=d([F({name:s.elementName,dependencies:[U]})],c);const A="forge-stepper",it={title:"Components/Stepper",render:r=>{const t=k(r),e=t?V(t):O;return I`
      <forge-stepper
         .alternative=${r.alternative}
         .layoutMode=${r.layoutMode}
         .layoutAlign=${r.layoutAlign}
         .disabled=${r.disabled}
         .vertical=${r.vertical}
         .linear=${r.linear}
         style=${e}>
        <forge-step>Step 1</forge-step>
        <forge-step>Step 2 <span slot="optional">Optional</span></forge-step>
        <forge-step><div slot="expansion-content">Expansion Content</div>${r.vertical?"Expand me":"Step 3"}</forge-step>
        <forge-step>Step 4</forge-step>
      </forge-stepper>
    `},component:A,parameters:{actions:{disable:!0}},argTypes:{...G({tagName:A,exclude:["steps","selectedIndex"],controls:{layoutMode:{control:"select",options:["fixed","clustered"]},layoutAlign:{control:"select",options:["left","center","right"]}}})},args:{layoutMode:"fixed"}},E={},u={...w,render:r=>I`
        <forge-stepper
         vertical="true">
        <forge-step>Step 1</forge-step>
        <forge-step>Step 2 <span slot="optional">Optional</span></forge-step>
        <forge-step><div slot="expansion-content">Expansion Content</div>${r.vertical?"Expand me":"Step 3"}</forge-step>
        <forge-step>Step 4</forge-step>
      </forge-stepper>
  `};var m,T,y;E.parameters={...E.parameters,docs:{...(m=E.parameters)==null?void 0:m.docs,source:{originalSource:"{}",...(y=(T=E.parameters)==null?void 0:T.docs)==null?void 0:y.source}}};var b,R,C;u.parameters={...u.parameters,docs:{...(b=u.parameters)==null?void 0:b.docs,source:{originalSource:`{
  ...standaloneStoryParams,
  render: args => html\`
        <forge-stepper
         vertical="true">
        <forge-step>Step 1</forge-step>
        <forge-step>Step 2 <span slot="optional">Optional</span></forge-step>
        <forge-step><div slot="expansion-content">Expansion Content</div>\${args.vertical ? 'Expand me' : 'Step 3'}</forge-step>
        <forge-step>Step 4</forge-step>
      </forge-stepper>
  \`
}`,...(C=(R=u.parameters)==null?void 0:R.docs)==null?void 0:C.source}}};const at=["Demo","Vertical"],ht=Object.freeze(Object.defineProperty({__proto__:null,Demo:E,Vertical:u,__namedExportsOrder:at,default:it},Symbol.toStringTag,{value:"Module"}));export{E as D,ht as S,u as V};
