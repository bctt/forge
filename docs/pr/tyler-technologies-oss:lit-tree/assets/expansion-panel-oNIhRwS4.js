import{C as E,l,j as T,B as u,k as f}from"./constants-9n5_0r7k.js";import{B as y,c as d}from"./base-adapter-B6TJxM93.js";import{n as N,t as _,c as b}from"./feature-detection-DRCh51Sa.js";import{O as m}from"./open-icon-jld-uG32.js";import{f as C}from"./utils-CYJ0zQHl.js";import"./index-BgGCUUFB.js";const p=`${E}expansion-panel`,c={OPEN:"open",ORIENTATION:"orientation",ANIMATION_TYPE:"animation-type",TRIGGER:"trigger"},A={...c,OPENING:"opening"},v={HIDDEN:"hidden"},I={HEADER:".header",CONTENT:".content",INNER:".inner",HEADER_SLOT:"slot[name=header]",DEFAULT_SLOT:"slot:not([name])",IGNORE:":is([data-forge-ignore],[forge-ignore])",OPEN_ICON:`:is([slot=header] ${m.elementName}, ${m.elementName}[slot^=header])`},L={TOGGLE:`${p}-toggle`,ANIMATION_COMPLETE:`${p}-animation-complete`},i={elementName:p,observedAttributes:c,attributes:A,classes:v,selectors:I,events:L},O=Symbol("emulateUserToggle");class P extends y{constructor(t){super(t),this._transitionStartListener=this._onTransitionStart.bind(this),this._transitionEndListener=this._onTransitionEnd.bind(this),this._headerElement=l(this._component,i.selectors.HEADER),this._contentElement=l(this._component,i.selectors.CONTENT),this._innerElement=l(this._component,i.selectors.INNER),this._defaultSlotElement=l(this._component,i.selectors.DEFAULT_SLOT)}get triggerElement(){return this._triggerElement}get _slottedContentElement(){return this._defaultSlotElement.assignedElements({flatten:!0})[0]}set _slottedContentId(t){var e;(e=this._slottedContentElement)==null||e.setAttribute("id",t)}get _slottedContentId(){var t;return((t=this._slottedContentElement)==null?void 0:t.getAttribute("id"))??""}setTriggerElementById(t){this._triggerElement=this._getTriggerElementById(t)}setAnimationCompleteListener(t){this._transitionCompleteListener=t,this._contentElement.addEventListener("transitionstart",this._transitionStartListener),this._contentElement.addEventListener("transitionend",this._transitionEndListener)}addContentSlotListener(t){this._defaultSlotElement.addEventListener("slotchange",t)}addHeaderListener(t,e){this._headerElement.addEventListener(t,e)}removeTriggerListeners(t={reset:!1}){var e;(e=this._triggerListenerController)==null||e.abort(),t!=null&&t.reset&&(this._triggerListenerController=new AbortController)}addTriggerListener(t,e){var n;(n=this._triggerElement)==null||n.addEventListener(t,e,{signal:this._triggerListenerController.signal})}tryToggleOpenIcon(t){const e=this._component.querySelector(i.selectors.OPEN_ICON);e&&(e.open=t)}setContentVisibility(t){this._contentElement.classList.toggle(i.classes.HIDDEN,!t)}_onTransitionStart(t){t.propertyName.startsWith("grid-template")&&this.toggleHostAttribute(i.attributes.OPENING,!0)}_onTransitionEnd(t){t.propertyName.startsWith("grid-template")&&(this.toggleHostAttribute(i.attributes.OPENING,!1),this._transitionCompleteListener())}animationStart(){this._innerElement.style.overflow="hidden"}animationEnd(){this._innerElement.style.removeProperty("overflow")}setTriggerElement(t){this._triggerElement=t}setContentId(){this._slottedContentId||(this._slottedContentId=`forge-expansion-panel-content-${N()}`)}updateAriaControls(){this._triggerElement&&_(this._triggerElement,!!this._slottedContentId,"aria-controls",this._slottedContentId)}updateAriaExpanded(t){this._triggerElement&&_(this._triggerElement,!0,"aria-expanded",t.toString())}detachTriggerAria(){var t,e;(t=this._triggerElement)==null||t.removeAttribute("aria-controls"),(e=this._triggerElement)==null||e.removeAttribute("aria-expanded")}_getTriggerElementById(t){return t?this._component.getRootNode().getElementById(t):null}}class S{constructor(t){this._adapter=t,this._open=!1,this._orientation="vertical",this._animationType="default",this._trigger="",this._clickListener=this._onClick.bind(this),this._keydownListener=this._onKeydown.bind(this),this._animationCompleteListener=this._onAnimationComplete.bind(this),this._slotListener=this._handleContentSlotChange.bind(this)}async initialize(){this._adapter.addHeaderListener("click",this._clickListener),this._adapter.addHeaderListener("keydown",this._keydownListener),this._adapter.setAnimationCompleteListener(this._animationCompleteListener),this._adapter.addContentSlotListener(this._slotListener),this._adapter.setContentId(),await C(),this._syncTrigger()}destroy(){this._adapter.detachTriggerAria(),this._adapter.removeTriggerListeners(),this._adapter.setTriggerElement(void 0)}_handleContentSlotChange(){this._adapter.setContentId(),this._syncTrigger()}_clearTrigger(){this._adapter.removeTriggerListeners({reset:!0}),this._adapter.detachTriggerAria()}_syncTrigger(){var t;(t=this._adapter.triggerElement)!=null&&t.isConnected||(this._clearTrigger(),this._trigger?this._adapter.setTriggerElementById(this._trigger):this._adapter.setTriggerElement(void 0)),this._adapter.updateAriaControls(),this._adapter.updateAriaExpanded(this._open),this._adapter.removeTriggerListeners({reset:!0}),this._adapter.addTriggerListener("click",this._clickListener),this._adapter.addTriggerListener("keydown",this._keydownListener)}_onClick(t){t.composedPath().find(n=>n.nodeType===Node.ELEMENT_NODE&&n.matches(i.selectors.IGNORE))||(t.stopPropagation(),this._toggle(),this.dispatchToggleEvent())}_onKeydown(t){(t.key===" "||t.key==="Enter")&&(t.stopPropagation(),t.preventDefault(),this._toggle(),this.dispatchToggleEvent())}_onAnimationComplete(){this._open?this._animationType!=="none"&&this._adapter.animationEnd():this._adapter.setContentVisibility(!1),this._adapter.dispatchHostEvent(new CustomEvent(i.events.ANIMATION_COMPLETE,{detail:this._open}))}_togglePanel(){this._adapter.toggleHostAttribute(i.attributes.OPEN,this._open),this._adapter.tryToggleOpenIcon(this._open),this._adapter.updateAriaExpanded(this._open),this._open&&(this._animationType!=="none"&&this._adapter.animationStart(),this._adapter.setContentVisibility(!0))}dispatchToggleEvent(){const t=new CustomEvent(i.events.TOGGLE,{detail:this._open,bubbles:!0,composed:!0});this._adapter.dispatchHostEvent(t)}_toggle(){this.open=!this.open}get open(){return this._open}set open(t){t=!!t,this._open!==t&&(this._open=t,this._togglePanel())}get orientation(){return this._orientation}set orientation(t){this._orientation!==t&&(this._orientation=t,this._adapter.setHostAttribute(i.attributes.ORIENTATION,this._orientation))}get animationType(){return this._animationType}set animationType(t){this._animationType!==t&&(this._animationType=t,this._adapter.setHostAttribute(i.attributes.ANIMATION_TYPE,this._animationType))}get trigger(){return this._trigger}set trigger(t){this._trigger!==t&&(this._clearTrigger(),this._trigger=t,this._adapter.setTriggerElementById(this._trigger),this._adapter.isConnected&&this._syncTrigger())}get triggerElement(){return this._adapter.triggerElement}set triggerElement(t){this._adapter.triggerElement!==t&&(this._clearTrigger(),this._adapter.setTriggerElement(t),this._adapter.isConnected&&this._syncTrigger())}}const w=`<template>
  <div class="forge-expansion-panel" part="root">
    <div class="header" part="header">
      <slot name="header"></slot>
    </div>
    <div class="content hidden" part="content">
      <div class="inner">
        <slot></slot>
      </div>
    </div>
  </div>
</template>
`,x=":host{display:block}:host([hidden]){display:none}.forge-expansion-panel{--_expansion-panel-animation-duration: var(--forge-expansion-panel-animation-duration, var(--forge-animation-duration-medium4, .4s));--_expansion-panel-animation-easing: var(--forge-expansion-panel-animation-easing, var(--forge-animation-easing-standard, cubic-bezier(.2, 0, 0, 1)))}.header{outline:none;-webkit-tap-highlight-color:transparent;cursor:pointer}.content{display:grid;grid-template-rows:0fr;transition-property:visibility,opacity,grid-template-rows;transition-duration:var(--_expansion-panel-animation-duration);transition-timing-function:var(--_expansion-panel-animation-easing);min-height:0;opacity:0;transform:translateZ(0);backface-visibility:hidden}.content .inner{display:grid;grid-template-rows:1fr}.hidden{visibility:hidden}@media (prefers-reduced-motion: reduce){.content{transition:none}}:host(:not([open])) .inner{overflow:hidden}:host([open]) .content{opacity:1}:host([open]:is(:not([orientation]),[orientation=vertical])) .content{grid-template-rows:1fr}:host([open][orientation=horizontal]) .content{grid-template-columns:1fr}:host([orientation=horizontal]) .forge-expansion-panel{display:grid;grid-template-columns:auto 1fr}:host([orientation=horizontal]) .content{transition-property:opacity,grid-template-columns;grid-template-rows:none;grid-template-columns:0fr}:host([animation-type=none]) .content{transition:none}";var k=Object.defineProperty,R=Object.getOwnPropertyDescriptor,a=(r,t,e,n)=>{for(var s=n>1?void 0:n?R(t,e):t,h=r.length-1,g;h>=0;h--)(g=r[h])&&(s=(n?g(t,e,s):g(s))||s);return n&&s&&k(t,e,s),s};let o=class extends u{static get observedAttributes(){return Object.values(i.observedAttributes)}constructor(){super(),f(this,w,x),this._core=new S(new P(this))}connectedCallback(){this._core.initialize()}disconnectedCallback(){this._core.destroy()}attributeChangedCallback(r,t,e){switch(r){case i.observedAttributes.OPEN:this.open=b(e);break;case i.observedAttributes.ORIENTATION:this.orientation=e;break;case i.observedAttributes.ANIMATION_TYPE:this.animationType=e;break;case i.observedAttributes.TRIGGER:this.trigger=e}}toggle(){this.open=!this.open}[O](r){this.open!==r&&(this.open=r,this._core.dispatchToggleEvent())}};a([d()],o.prototype,"open",2);a([d()],o.prototype,"orientation",2);a([d()],o.prototype,"animationType",2);a([d()],o.prototype,"trigger",2);a([d()],o.prototype,"triggerElement",2);o=a([T({name:i.elementName})],o);export{i as E,o as a,O as e};
