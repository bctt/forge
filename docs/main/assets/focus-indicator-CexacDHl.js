import{C as m,n as b,B as w,o as E,b as h}from"./constants-CmaEVTEu.js";import{B as C,c as u}from"./base-adapter-Y8TBBZEm.js";import"./index-Dh0vMUMR.js";const g="forge-aria-controls-placeholder";function P(r,t){const i=r.toLowerCase().indexOf(t.toLowerCase());if(i!==-1){const a=i+t.length,s=document.createElement("span"),n=document.createElement("span");return n.style.fontWeight="bold",n.textContent=r.substring(i,a),s.appendChild(document.createTextNode(r.substring(0,i))),s.appendChild(n),s.appendChild(document.createTextNode(r.substring(a))),s}}function U(r,{capture:t=!0,pointerenter:e=!0,focusin:i=!0}={}){let a;const s=()=>{typeof a=="function"&&a()};return{userInteraction:new Promise(v=>{const f={once:!0,capture:t},l=p=>{i&&r.removeEventListener("focusin",_,f),v(p)},_=p=>{e&&r.removeEventListener("pointerenter",l,f),v(p)};a=()=>{e&&r.removeEventListener("pointerenter",l,f),i&&r.removeEventListener("focusin",_,f)},e&&r.addEventListener("pointerenter",l,f),i&&r.addEventListener("focusin",_,f)}),destroy:s}}function H(r,t){return t===0?0:r/100*t}function W(r,t,e,i=0,a=100){const s=e-t,n=r-t;return!s||!n?i:n*a/s+i}function j(...r){return Math.min(...r.map(t=>t??Number.POSITIVE_INFINITY))}function z(r,t){if(!(r&&t))return!1;const e=r.getBoundingClientRect(),i=t.getBoundingClientRect();return!(e.top>i.bottom||e.right<i.left||e.bottom<i.top||e.left>i.right)}function G({x:r,y:t},e){if(!e)return!1;const{top:i,left:a,bottom:s,right:n}=e.getBoundingClientRect();return r>=a&&r<=n&&t>=i&&t<=s}function L(r,t){let e=null;return t&&(e=T(r,t)),e||r.parentElement}function T(r,t){const e=r.getRootNode();return t===":host"&&e instanceof ShadowRoot?e.host:e.querySelector(`#${t}`)}function V(r,t,e=!0){return e&&t.append(...r.childNodes),r.insertAdjacentElement("beforebegin",t),r.remove(),t}function $(r,t=","){return r.split(t).map(e=>e.trim())}function q(r){const t=window.devicePixelRatio||1;return Math.round(r*t)/t}function X(){if(document.getElementById(g))return;const t=document.createElement("div");t.id=g,document.body.appendChild(t)}function Y(r){const t=document.getElementById(g);t&&r.setAttribute("aria-controls",t.id)}class A extends C{constructor(t){super(t),this._targetElement=null}destroy(){this._targetElement=null}hasTargetElement(){return!!this._targetElement}addTargetListener(t,e){var i;(i=this._targetElement)==null||i.addEventListener(t,e)}removeTargetListener(t,e){var i;(i=this._targetElement)==null||i.removeEventListener(t,e)}getTargetElement(){return this._targetElement}setTargetElement(t){this._targetElement=t}trySetTarget(t){this._targetElement=L(this._component,t)}isActive(t,e){const i=e??this._targetElement;return!!(i!=null&&i.matches(t))}}const y=`${m}focus-indicator`,O={TARGET:"target",ACTIVE:"active",INWARD:"inward",CIRCULAR:"circular",ALLOW_FOCUS:"allow-focus",FOCUS_MODE:"focus-mode"},I={...O},F={FOCUS_MODE:"focusin"},o={elementName:y,attributes:I,defaults:F};class M{constructor(t){this._adapter=t,this._target=null,this._active=!1,this._inward=!1,this._circular=!1,this._allowFocus=!1,this._focusMode=o.defaults.FOCUS_MODE,this._interactionListener=e=>this._onInteraction(e)}initialize(){this._adapter.hasTargetElement()||this._adapter.trySetTarget(this._target),this._addListeners()}destroy(){this._removeListeners(),this._adapter.destroy()}_addListeners(){this._adapter.addTargetListener(this._focusMode,this._interactionListener),this._adapter.addTargetListener("focusout",this._interactionListener),this._adapter.addTargetListener("pointerdown",this._interactionListener)}_removeListeners(){this._adapter.removeTargetListener(this._focusMode,this._interactionListener),this._adapter.removeTargetListener("focusout",this._interactionListener),this._adapter.removeTargetListener("pointerdown",this._interactionListener)}_onInteraction(t){const e=t.target;switch(t.type){case this._focusMode:this.active=this._adapter.isActive(this._allowFocus?":focus":":focus-visible",e);break;case"focusout":this.active=!1;break;case"pointerdown":this.active=this._allowFocus?this._adapter.isActive(":focus",e):this._adapter.isActive(":focus-visible",e);break}}get targetElement(){return this._adapter.getTargetElement()}set targetElement(t){this._removeListeners(),this._adapter.setTargetElement(t),this._addListeners()}get target(){return this._adapter.getHostAttribute(o.attributes.TARGET)}set target(t){this._target!==t&&(this._target=t,this._adapter.isConnected&&this._adapter.trySetTarget(t),this._adapter.toggleHostAttribute(o.attributes.TARGET,!!this._target,this._target))}get active(){return this._active}set active(t){t=!!t,this._active!==t&&(this._active=t,this._adapter.toggleHostAttribute(o.attributes.ACTIVE,this._active))}get inward(){return this._inward}set inward(t){t=!!t,this._inward!==t&&(this._inward=t,this._adapter.toggleHostAttribute(o.attributes.INWARD,this._inward))}get circular(){return this._circular}set circular(t){t=!!t,this._circular!==t&&(this._circular=t,this._adapter.toggleHostAttribute(o.attributes.CIRCULAR,this._circular))}get allowFocus(){return this._allowFocus}set allowFocus(t){t=!!t,this._allowFocus!==t&&(this._allowFocus=t,this._adapter.toggleHostAttribute(o.attributes.ALLOW_FOCUS,this._allowFocus))}get focusMode(){return this._focusMode}set focusMode(t){if(t??(t=o.defaults.FOCUS_MODE),this._focusMode!==t){this._adapter.isConnected&&this._removeListeners(),this._focusMode=t,this._adapter.isConnected&&this._addListeners();const e=this._focusMode!==o.defaults.FOCUS_MODE;this._adapter.toggleHostAttribute(o.attributes.FOCUS_MODE,e,this._focusMode)}}}const R=`<template></template>
`,x=":host{--_focus-indicator-display: var(--forge-focus-indicator-display, flex);--_focus-indicator-width: var(--forge-focus-indicator-width, var(--forge-border-medium, 2px));--_focus-indicator-active-width: var(--forge-focus-indicator-active-width, 6px);--_focus-indicator-color: var(--forge-focus-indicator-color, var(--forge-theme-primary, #3f51b5));--_focus-indicator-shape: var(--forge-focus-indicator-shape, var(--forge-shape-extra-small, 1px));--_focus-indicator-duration: var(--forge-focus-indicator-duration, var(--forge-animation-duration-long4, .6s));--_focus-indicator-easing: var(--forge-focus-indicator-easing, var(--forge-animation-easing-emphasized, cubic-bezier(.2, 0, 0, 1)));--_focus-indicator-shape-start-start: var(--forge-focus-indicator-shape-start-start, var(--_focus-indicator-shape));--_focus-indicator-shape-start-end: var(--forge-focus-indicator-shape-start-end, var(--_focus-indicator-shape));--_focus-indicator-shape-end-end: var(--forge-focus-indicator-shape-end-end, var(--_focus-indicator-shape));--_focus-indicator-shape-end-start: var(--forge-focus-indicator-shape-end-start, var(--_focus-indicator-shape));--_focus-indicator-outward-offset: var(--forge-focus-indicator-outward-offset, var(--forge-spacing-xxsmall, 4px));--_focus-indicator-inward-offset: var(--forge-focus-indicator-inward-offset, 0px);--_focus-indicator-offset-block: var(--forge-focus-indicator-offset-block, 0);--_focus-indicator-offset-inline: var(--forge-focus-indicator-offset-inline, 0)}:host{animation-delay:0s,calc(var(--_focus-indicator-duration) * .25);animation-duration:calc(var(--_focus-indicator-duration) * .25),calc(var(--_focus-indicator-duration) * .75);animation-timing-function:var(--_focus-indicator-easing);box-sizing:border-box;color:var(--_focus-indicator-color);display:none;pointer-events:none;position:absolute;margin-block:var(--_focus-indicator-offset-block);margin-inline:var(--_focus-indicator-offset-inline)}:host([hidden]){display:none}:host([active]){display:var(--_focus-indicator-display)}:host(:not([inward])){animation-name:outward-grow,outward-shrink;border-end-end-radius:calc(var(--_focus-indicator-shape-end-end) + var(--_focus-indicator-outward-offset));border-end-start-radius:calc(var(--_focus-indicator-shape-end-start) + var(--_focus-indicator-outward-offset));border-start-end-radius:calc(var(--_focus-indicator-shape-start-end) + var(--_focus-indicator-outward-offset));border-start-start-radius:calc(var(--_focus-indicator-shape-start-start) + var(--_focus-indicator-outward-offset));inset:calc(-1 * var(--_focus-indicator-outward-offset));outline:var(--_focus-indicator-width) solid currentColor}:host([inward]){animation-name:inward-grow,inward-shrink;border-end-end-radius:calc(var(--_focus-indicator-shape-end-end) - var(--_focus-indicator-inward-offset));border-end-start-radius:calc(var(--_focus-indicator-shape-end-start) - var(--_focus-indicator-inward-offset));border-start-end-radius:calc(var(--_focus-indicator-shape-start-end) - var(--_focus-indicator-inward-offset));border-start-start-radius:calc(var(--_focus-indicator-shape-start-start) - var(--_focus-indicator-inward-offset));border:var(--_focus-indicator-width) solid currentColor;inset:var(--_focus-indicator-inward-offset)}:host([circular]){--_focus-indicator-shape: var(--forge-focus-indicator-shape, 50%)}@keyframes outward-grow{0%{outline-width:0}to{outline-width:var(--_focus-indicator-active-width)}}@keyframes outward-shrink{0%{outline-width:var(--_focus-indicator-active-width)}}@keyframes inward-grow{0%{border-width:0}to{border-width:var(--_focus-indicator-active-width)}}@keyframes inward-shrink{0%{border-width:var(--_focus-indicator-active-width)}}@media (prefers-reduced-motion){:host{animation:none}}";var S=Object.defineProperty,D=Object.getOwnPropertyDescriptor,d=(r,t,e,i)=>{for(var a=i>1?void 0:i?D(t,e):t,s=r.length-1,n;s>=0;s--)(n=r[s])&&(a=(i?n(t,e,a):n(a))||a);return i&&a&&S(t,e,a),a};let c=class extends w{static get observedAttributes(){return Object.values(o.attributes)}constructor(){super(),E(this,R,x),this._core=new M(new A(this))}connectedCallback(){this._core.initialize()}disconnectedCallback(){this._core.destroy()}attributeChangedCallback(r,t,e){switch(r){case o.attributes.TARGET:this.target=e;break;case o.attributes.ACTIVE:this.active=h(e);break;case o.attributes.INWARD:this.inward=h(e);break;case o.attributes.CIRCULAR:this.circular=h(e);break;case o.attributes.ALLOW_FOCUS:this.allowFocus=h(e);break;case o.attributes.FOCUS_MODE:this.focusMode=e;break}}};d([u()],c.prototype,"targetElement",2);d([u()],c.prototype,"target",2);d([u()],c.prototype,"active",2);d([u()],c.prototype,"inward",2);d([u()],c.prototype,"circular",2);d([u()],c.prototype,"allowFocus",2);d([u()],c.prototype,"focusMode",2);c=d([b({name:o.elementName})],c);export{o as F,c as a,U as b,$ as c,L as d,z as e,q as f,j as g,P as h,G as i,W as j,T as l,H as p,V as r,Y as s,X as t};
