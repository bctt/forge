import{n as _,C as d,o as m,B as u}from"./constants-DjE6emXm.js";import{B as E,c as C}from"./base-adapter-F7QHxK2H.js";import{E as c,e as N,a as f}from"./expansion-panel-B2IajlLL.js";class P extends E{constructor(e){super(e)}isNestedPanel(e){return!e||!this._component.contains(e)?!1:_(e,this._component).some(t=>t.tagName.toLocaleLowerCase()===c.elementName)}getChildPanels(e){return e?Array.from(this._component.querySelectorAll(e)):Array.from(this._component.children).filter(t=>t.tagName.toLocaleLowerCase()===c.elementName)}}const p=`${d}accordion`,S={PANEL_SELECTOR:"panel-selector"},A={TOGGLE:`${p}-toggle`},n={elementName:p,attributes:S,events:A};class b{constructor(e){this._adapter=e,this._hostInteractionCallback=this._hostInteraction.bind(this)}initialize(){this._attachListeners()}_attachListeners(){this._adapter.addHostListener(c.events.TOGGLE,this._hostInteractionCallback)}_hostInteraction(e){if(!e.detail||this._panelSelector&&!e.target.matches(this._panelSelector)||(e.stopPropagation(),this._adapter.isNestedPanel(e.target)))return;this._adapter.getChildPanels(this._panelSelector).forEach(t=>{e.target!==t&&!this._adapter.isNestedPanel(t)&&t.open&&t[N](!1)}),this._adapter.dispatchHostEvent(new CustomEvent(n.events.TOGGLE,{detail:e.target,bubbles:!0,composed:!0}))}get panelSelector(){return this._panelSelector}set panelSelector(e){this._panelSelector!==e&&(this._panelSelector=e,this._adapter.setHostAttribute(n.attributes.PANEL_SELECTOR,this._panelSelector))}}var L=Object.defineProperty,O=Object.getOwnPropertyDescriptor,h=(r,e,s,t)=>{for(var a=t>1?void 0:t?O(e,s):e,o=r.length-1,i;o>=0;o--)(i=r[o])&&(a=(t?i(e,s,a):i(a))||a);return t&&a&&L(e,s,a),a};let l=class extends u{static get observedAttributes(){return[n.attributes.PANEL_SELECTOR]}constructor(){super(),this._core=new b(new P(this))}connectedCallback(){this._core.initialize()}attributeChangedCallback(r,e,s){switch(r){case n.attributes.PANEL_SELECTOR:this.panelSelector=s;break}}};h([C()],l.prototype,"panelSelector",2);l=h([m({name:n.elementName,dependencies:[f]})],l);
