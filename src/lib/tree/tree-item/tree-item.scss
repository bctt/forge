@use './core' as *;
@use '../../focus-indicator';
@use '../../state-layer';

//
// Host
//

:host {
  @include host;
}

//
// Base
//

.forge-tree-item {
  @include tokens;
}

.forge-tree-item {
  @include base;

  .header {
    @include header;
  }

  .content {
    @include content;
  }

  .expand-icon {
    @include expand-icon;
  }

  .checkbox {
    @include checkbox;
  }

  .children {
    @include children;

    &::after {
      @include indent-line;
    }
  }

  &.leaf {
    .expand-icon {
      display: none;
    }

    .children {
      display: none;
    }
  }

  &.indeterminate {
    @include indeterminate;
  }
}

//
// Collapsed
//

:host(:not([open])) {
  .children {
    display: none;
  }
}

//
// Selected
//

:host([selected]) {
  .header {
    @include selected;
  }

  forge-state-layer {
    @include state-layer.provide-theme(
      (
        color: var(--forge-theme-primary)
      )
    );
  }
}

//
// Focus indicator
//

forge-focus-indicator {
  @include focus-indicator.provide-theme(
    (
      shape: #{token(shape)}
    )
  );

  // Ensure the focus indicator appears above sibling items
  z-index: 1;
}
